import{_ as Z,r as v,G as ee,I as le,M as ae,b as oe,c as f,f as a,d as o,e as r,l as g,j as m,t as te,h as i,o as s,n as w,N as E,m as y,k as c,F as D,C as N,O as M}from"./index-CAgRbO-3.js";import{g as ne,E as re}from"./index-5htLQHb7.js";const se={class:"app-container"},ue={key:0,style:{width:"100%","text-align":"center"}},de={class:"form-row"},me={class:"form-row"},ie={class:"form-row"},ce={class:"form-row"},fe={key:0,class:"form-row"},pe={class:"form-row"},ve={class:"form-row"},ye={class:"form-row"},_e={class:"form-row"},Ve={class:"form-row"},be={class:"form-row"},ge={__name:"view",setup(De){const{proxy:p}=te(),U=v(null),P=v("top"),{legaldb_device_type:S,legaldb_remark:C,legaldb_office:x,legaldb_status:h,legaldb_email_suffixes:I}=p.useDict("legaldb_device_type","legaldb_remark","legaldb_office","legaldb_status"),L=v(null),_=v(!1),R=v(!1),q=ee(),T=le({form:{},rules:{}}),{form:t,rules:j}=ae(T);function A(){p.$tab.closePage()}function $(d){U.value.handleEdit(d)}function H(){F(p.$route.query.id)}function O(){return{legaldb_device_type:S,legaldb_remark:C,legaldb_office:x,legaldb_email_suffixes:I}}function k(){return q.roles[0]=="FIDS"}function G(d){if(d=="Approved")return!k();if(d=="Cancelled by IT")return!1;if(d=="Formatted")return!1;if(d=="Rejected")return!0;if(d==="Waiting for Confirmation")return!k();if(d==="Pending Legal Review")return!k()}function F(d){_.value=!0,ne(d).then(e=>{_.value=!1,e.data?t.value=e.data:R.value=!0}).catch(e=>{_.value=!1})}return oe(()=>{F(p.$route.query.id)}),(d,e)=>{const W=i("el-text"),u=i("el-input"),n=i("el-form-item"),V=i("el-option"),b=i("el-select"),Y=i("el-date-picker"),B=i("el-button"),z=i("el-form"),J=i("el-tab-pane"),K=i("el-tabs"),Q=M("hasPermi"),X=M("loading");return s(),f("div",se,[a(R)?(s(),f("div",ue,[o(W,null,{default:r(()=>[w(" No data found ")]),_:1})])):g("",!0),a(R)?g("",!0):(s(),m(K,{key:1,"tab-position":a(P)},{default:r(()=>[o(J,{label:"DPN Request"},{default:r(()=>[E((s(),m(z,{ref_key:"formRef",ref:L,onSubmit:e[26]||(e[26]=y(()=>{},["prevent"])),rules:a(j),"label-width":"auto","label-position":"left",style:{padding:"0 200px"}},{default:r(()=>[c("div",de,[o(n,{label:"LPN",prop:"lpn",class:"left-column"},{default:r(()=>[o(u,{id:"lpnField",modelValue:a(t).lpn,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).lpn=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Staff No. (GPN)",prop:"staffNo",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).staffNo,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).staffNo=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),c("div",me,[o(n,{label:"Staff Name",prop:"staffName",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).staffName,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).staffName=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Email",prop:"email",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).email,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).email=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),c("div",ie,[o(n,{label:"Office",prop:"office",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).office,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).office=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Dept/Service Line",prop:"serviceLine",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).serviceLine,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).serviceLine=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),c("div",ce,[o(n,{label:"EY Rank",prop:"rankName",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).rankName,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).rankName=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Status",prop:"status",class:"right-column"},{default:r(()=>[o(b,{modelValue:a(t).status,"onUpdate:modelValue":e[7]||(e[7]=l=>a(t).status=l),placeholder:"Select",class:"readonly-select",onFocus:e[8]||(e[8]=y(()=>{},["prevent"]))},{default:r(()=>[(s(!0),f(D,null,N(a(h),l=>(s(),m(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),a(t).status=="FIDS Received"?(s(),f("div",fe,[o(n,{label:"FIDS Received By",prop:"fidsReceivedBy",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).fidsReceivedBy,"onUpdate:modelValue":e[9]||(e[9]=l=>a(t).fidsReceivedBy=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"FIDS Received Date",prop:"fidsReceivedDate",class:"right-column"},{default:r(()=>[o(Y,{clearable:"",modelValue:a(t).fidsReceivedDate,"onUpdate:modelValue":e[10]||(e[10]=l=>a(t).fidsReceivedDate=l),type:"datetime",readonly:!0,placeholder:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})])):g("",!0),c("div",pe,[o(n,{label:"Date Returned to IT",prop:"returnedDate",class:"left-column"},{default:r(()=>[o(Y,{clearable:"",modelValue:a(t).returnedDate,"onUpdate:modelValue":e[11]||(e[11]=l=>a(t).returnedDate=l),type:"datetime",readonly:!0,format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss","date-format":"YYYY-MM-DD","time-format":"hh:mm:ss",placeholder:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Device Type",prop:"deviceType",class:"right-column"},{default:r(()=>[o(b,{modelValue:a(t).deviceType,"onUpdate:modelValue":e[12]||(e[12]=l=>a(t).deviceType=l),placeholder:"Select",class:"readonly-select",onFocus:e[13]||(e[13]=y(()=>{},["prevent"]))},{default:r(()=>[(s(!0),f(D,null,N(a(S),l=>(s(),m(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),c("div",ve,[o(n,{label:"Device Location",prop:"deviceLocation",class:"left-column"},{default:r(()=>[o(b,{modelValue:a(t).deviceLocation,"onUpdate:modelValue":e[14]||(e[14]=l=>a(t).deviceLocation=l),placeholder:"Select",class:"readonly-select",onFocus:e[15]||(e[15]=y(()=>{},["prevent"]))},{default:r(()=>[(s(!0),f(D,null,N(a(x),l=>(s(),m(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"EYAsset No",prop:"eyAssetNo",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).eyAssetNo,"onUpdate:modelValue":e[16]||(e[16]=l=>a(t).eyAssetNo=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),c("div",ye,[o(n,{label:"Serial No. (For OSS)",prop:"serialNo",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).serialNo,"onUpdate:modelValue":e[17]||(e[17]=l=>a(t).serialNo=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Remark",prop:"remark",class:"right-column"},{default:r(()=>[o(b,{modelValue:a(t).remark,"onUpdate:modelValue":e[18]||(e[18]=l=>a(t).remark=l),readonly:!0,placeholder:"Select",class:"readonly-select",onFocus:e[19]||(e[19]=y(()=>{},["prevent"]))},{default:r(()=>[(s(!0),f(D,null,N(a(C),l=>(s(),m(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),c("div",_e,[o(n,{label:"Engagement Code",prop:"engagementCode",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).engagementCode,"onUpdate:modelValue":e[20]||(e[20]=l=>a(t).engagementCode=l),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),o(n,{label:"Engagement Name",prop:"engagementName",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).engagementName,"onUpdate:modelValue":e[21]||(e[21]=l=>a(t).engagementName=l),readonly:!0,placeholder:"",type:"textarea",rows:1},null,8,["modelValue"])]),_:1})]),c("div",Ve,[o(n,{label:"Received By",prop:"receivedBy",class:"left-column"},{default:r(()=>[o(u,{modelValue:a(t).receivedBy,"onUpdate:modelValue":e[22]||(e[22]=l=>a(t).receivedBy=l),modelModifiers:{trim:!0},readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),o(n,{class:"center-column"}),a(t).status=="Rejected"?(s(),m(n,{key:0,label:"Reject Reason",prop:"rejectReason",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).rejectReason,"onUpdate:modelValue":e[23]||(e[23]=l=>a(t).rejectReason=l),placeholder:"",type:"textarea",rows:2,readonly:!0},null,8,["modelValue"])]),_:1})):a(t).status=="Cancelled by IT"?(s(),m(n,{key:1,label:"Cancel Reason",prop:"cancelReason",class:"right-column"},{default:r(()=>[o(u,{modelValue:a(t).cancelReason,"onUpdate:modelValue":e[24]||(e[24]=l=>a(t).cancelReason=l),placeholder:"",type:"textarea",rows:2,readonly:!0},null,8,["modelValue"])]),_:1})):(s(),m(n,{key:2,class:"right-column"}))]),c("div",be,[o(n,{class:"left-column"}),o(n,{class:"center-column"}),o(n,{class:"right-column"},{default:r(()=>[G(a(t).status)?E((s(),m(B,{key:0,type:"primary",onClick:e[25]||(e[25]=l=>$(a(p).$route.query.id))},{default:r(()=>[w("Edit Mode")]),_:1})),[[Q,["legaldatabase:DPNRequest:edit"]]]):g("",!0),o(B,{onClick:A},{default:r(()=>[w("Close")]),_:1})]),_:1})])]),_:1},8,["rules"])),[[X,a(_)]])]),_:1})]),_:1},8,["tab-position"])),o(a(re),{ref_key:"editDialog",ref:U,onRefreshData:H,onUpdateUnreadCount:()=>{},getDicts:O},null,512)])}}},ke=Z(ge,[["__scopeId","data-v-08afa275"]]);export{ke as default};
