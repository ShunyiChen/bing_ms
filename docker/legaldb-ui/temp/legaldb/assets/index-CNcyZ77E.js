import{A as O,_ as K,I as M,Z as oe,M as H,h as i,N as z,R as se,o as x,j as F,e as a,k as N,d as e,f as l,i as G,n as U,t as Z,r as m,c as J,x as A,z as T,a3 as we,v as Ve,b as Ne,a1 as Le,O as ne,D as te,H as Pe}from"./index-CAgRbO-3.js";function Ae(I){return O({url:"/legaldatabase/pending/list",method:"post",data:I})}function re(I){return O({url:"/legaldatabase/pending/"+I,method:"get"})}function Ue(I){return O({url:"/legaldatabase/pending",method:"post",data:I})}function Ie(I){return O({url:"/legaldatabase/pending/update",method:"post",data:I})}const Be={class:"form-row"},$e={class:"form-row"},ke={__name:"index",props:{showSearch:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["update:loading","getSearchResult"],setup(I,{expose:L,emit:R}){const{proxy:C}=Z(),y=M({form:{},queryParams:{pageNum:1,pageSize:Number(oe.local.get("displayPageRows"))||10,nameInBatchApprovalList:null,gpn:null,emailAddress:null,userName:null,lpn:null},rules:{}}),{queryParams:u}=H(y),v=R;function p(d){u.value.status=d,k()}function c(){k()}function k(){v("update:loading",!0),Ae(u.value).then(d=>{v("getSearchResult",d,u.value)}).catch(d=>{v("update:loading",!1)})}function n(){C.resetForm("queryRef"),c()}return L({initGetList:p,resetQuery:n}),(d,f)=>{const P=i("el-input"),b=i("el-form-item"),S=i("el-button"),_=i("el-form");return z((x(),F(_,{model:l(u),ref:"queryRef",inline:!0,"label-width":"135","label-suffix":":",class:"custom-form"},{default:a(()=>[N("div",Be,[e(b,{label:"NameInBatch",prop:"nameInBatchApprovalList",class:"custom-form-item"},{default:a(()=>[e(P,{modelValue:l(u).nameInBatchApprovalList,"onUpdate:modelValue":f[0]||(f[0]=t=>l(u).nameInBatchApprovalList=t),placeholder:"",clearable:"",onKeyup:G(c,["enter"])},null,8,["modelValue"])]),_:1}),e(b,{label:"GPN",prop:"gpn",class:"custom-form-item"},{default:a(()=>[e(P,{modelValue:l(u).gpn,"onUpdate:modelValue":f[1]||(f[1]=t=>l(u).gpn=t),placeholder:"",clearable:"",onKeyup:G(c,["enter"])},null,8,["modelValue"])]),_:1}),e(b,{label:"Email",prop:"emailAddress",class:"custom-form-item"},{default:a(()=>[e(P,{modelValue:l(u).emailAddress,"onUpdate:modelValue":f[2]||(f[2]=t=>l(u).emailAddress=t),placeholder:"",clearable:"",onKeyup:G(c,["enter"])},null,8,["modelValue"])]),_:1})]),N("div",$e,[e(b,{label:"UserName",prop:"userName",class:"custom-form-item"},{default:a(()=>[e(P,{modelValue:l(u).userName,"onUpdate:modelValue":f[3]||(f[3]=t=>l(u).userName=t),placeholder:"",clearable:"",onKeyup:G(c,["enter"])},null,8,["modelValue"])]),_:1}),e(b,{label:"LPN",prop:"lpn",class:"custom-form-item"},{default:a(()=>[e(P,{modelValue:l(u).lpn,"onUpdate:modelValue":f[4]||(f[4]=t=>l(u).lpn=t),placeholder:"",clearable:"",onKeyup:G(c,["enter"])},null,8,["modelValue"])]),_:1}),e(b,{class:"custom-form-item"},{default:a(()=>[e(S,{type:"primary",icon:"Search",onClick:c},{default:a(()=>[U("Search")]),_:1}),e(S,{icon:"Refresh",onClick:n},{default:a(()=>[U("Reset")]),_:1})]),_:1})])]),_:1},8,["model"])),[[se,I.showSearch]])}}},Se=K(ke,[["__scopeId","data-v-6b03babe"]]),qe={class:"form-row"},xe={class:"form-row"},Re={class:"form-row"},Ce={class:"dialog-footer"},De={__name:"index",emits:["update:loading","refreshData"],setup(I,{expose:L,emit:R}){const C=R,{proxy:y}=Z(),u=m(""),v=m(null),p=m(!1);m(!1);const c=m(!1),k=M({form:{},queryParams:{pageNum:1,pageSize:10,nameInBatchApprovalList:null,gpn:null,emailAddress:null,userName:null,lpn:null},rules:{nameInBatchApprovalList:[{required:!0,message:"NameInBatch cannot be empty.",trigger:["change","blur"]}],gpn:[{required:!0,message:"GPN cannot be empty.",trigger:["change","blur"]}],emailAddress:[{required:!0,message:"EmailAddress cannot be empty.",trigger:["change","blur"]}],userName:[{required:!0,message:"UserName cannot be empty.",trigger:["change","blur"]}],lpn:[{required:!0,message:"LPN cannot be empty.",trigger:["change","blur"]}]}}),{form:n,rules:d}=H(k);function f(){p.value=!1,S()}function P(){y.$refs.formRef.validate(t=>{t&&(c.value=!0,Ue(n.value).then(s=>{y.$modal.msgSuccess("Added successfully"),p.value=!1,C("refreshData"),c.value=!1}).catch(s=>{c.value=!1}))})}function b(){S(),p.value=!0,u.value=T.global.t("message.NewPending.1"),_()}function S(){n.value.nameInBatchApprovalList=null,n.value.gpn=null,n.value.emailAddress=null,n.value.userName=null,n.value.lpn=null,y.resetForm("formRef")}const _=()=>{setTimeout(()=>{var t;(t=document.getElementById("firstField"))==null||t.focus()},100)};return L({handleAdd:b}),(t,s)=>{const r=i("el-input"),g=i("el-form-item"),B=i("el-form"),D=i("el-button"),h=i("el-dialog");return x(),J("div",null,[e(h,{modal:!1,title:u.value,modelValue:p.value,"onUpdate:modelValue":s[5]||(s[5]=w=>p.value=w),width:"50%","close-on-click-modal":!1,"close-on-press-escape":!1,draggable:"",overflow:"",style:{border:"1px solid var(--el-color-primary)"}},{footer:a(()=>[N("div",Ce,[e(D,{type:"primary",onClick:P,loading:c.value},{default:a(()=>[U(A(t.$t("message.NewPending.2")),1)]),_:1},8,["loading"]),e(D,{onClick:f},{default:a(()=>[U(A(t.$t("message.NewPending.3")),1)]),_:1})])]),default:a(()=>[e(B,{ref_key:"formRef",ref:v,model:l(n),rules:l(d),"label-width":"auto"},{default:a(()=>[N("div",qe,[e(g,{label:"NameInBatch",prop:"nameInBatchApprovalList",class:"left-column"},{default:a(()=>[e(r,{id:"firstField",modelValue:l(n).nameInBatchApprovalList,"onUpdate:modelValue":s[0]||(s[0]=w=>l(n).nameInBatchApprovalList=w),placeholder:""},null,8,["modelValue"])]),_:1}),e(g,{label:"GPN",prop:"gpn",class:"right-column"},{default:a(()=>[e(r,{modelValue:l(n).gpn,"onUpdate:modelValue":s[1]||(s[1]=w=>l(n).gpn=w),placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",xe,[e(g,{label:"Email",prop:"emailAddress",class:"left-column"},{default:a(()=>[e(r,{modelValue:l(n).emailAddress,"onUpdate:modelValue":s[2]||(s[2]=w=>l(n).emailAddress=w),placeholder:""},null,8,["modelValue"])]),_:1}),e(g,{label:"UserName",prop:"userName",class:"right-column"},{default:a(()=>[e(r,{modelValue:l(n).userName,"onUpdate:modelValue":s[3]||(s[3]=w=>l(n).userName=w),placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",Re,[e(g,{label:"LPN",prop:"lpn",class:"left-column"},{default:a(()=>[e(r,{modelValue:l(n).lpn,"onUpdate:modelValue":s[4]||(s[4]=w=>l(n).lpn=w),placeholder:""},null,8,["modelValue"])]),_:1}),e(g,{class:"right-column"})])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}},Ee=K(De,[["__scopeId","data-v-5e12582e"]]),ze={class:"form-row"},Fe={class:"form-row"},Te={class:"form-row"},Ge={class:"dialog-footer"},Ke={__name:"index",emits:["update:loading","refreshData"],setup(I,{expose:L,emit:R}){const C=R,{proxy:y}=Z(),u=m(""),v=m(null),p=m(!1),c=m(!1),k=m(!1),n=M({form:{},queryParams:{pageNum:1,pageSize:10,nameInBatchApprovalList:null,gpn:null,emailAddress:null,userName:null,lpn:null},rules:{nameInBatchApprovalList:[{required:!0,message:"NameInBatch cannot be empty.",trigger:["change","blur"]}],gpn:[{required:!0,message:"GPN cannot be empty.",trigger:["change","blur"]}],emailAddress:[{required:!0,message:"EmailAddress cannot be empty.",trigger:["change","blur"]}],userName:[{required:!0,message:"UserName cannot be empty.",trigger:["change","blur"]}],lpn:[{required:!0,message:"LPN cannot be empty.",trigger:["change","blur"]}]}}),{form:d,rules:f}=H(n);function P(){p.value=!1,_()}function b(){y.$refs.formRef.validate(s=>{s&&(k.value=!0,Ie(d.value).then(r=>{y.$modal.msgSuccess("Updated successfully"),p.value=!1,C("refreshData"),k.value=!1}).catch(r=>{k.value=!1}))})}function S(s){_(),p.value=!0,u.value=T.global.t("message.EditPending.1"),c.value=!0,t(),re(s).then(r=>{d.value=r.data,c.value=!1})}function _(){d.value.nameInBatchApprovalList=null,d.value.gpn=null,d.value.emailAddress=null,d.value.userName=null,d.value.lpn=null,y.resetForm("formRef")}const t=()=>{setTimeout(()=>{var s;(s=document.getElementById("firstField"))==null||s.focus()},100)};return L({handleEdit:S}),(s,r)=>{const g=i("el-input"),B=i("el-form-item"),D=i("el-form"),h=i("el-button"),w=i("el-dialog");return x(),J("div",null,[e(w,{modal:!1,title:u.value,modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=$=>p.value=$),width:"50%","close-on-click-modal":!1,"close-on-press-escape":!1,draggable:"",overflow:"",style:{border:"1px solid var(--el-color-primary)"}},{footer:a(()=>[N("div",Ge,[e(h,{type:"primary",onClick:b},{default:a(()=>[U(A(s.$t("message.EditPending.2")),1)]),_:1}),e(h,{onClick:P},{default:a(()=>[U(A(s.$t("message.EditPending.3")),1)]),_:1})])]),default:a(()=>[e(D,{ref_key:"formRef",ref:v,model:l(d),rules:l(f),"label-width":"auto"},{default:a(()=>[N("div",ze,[e(B,{label:"NameInBatch",prop:"nameInBatchApprovalList",class:"left-column"},{default:a(()=>[e(g,{id:"firstField",maxLength:"100",modelValue:l(d).nameInBatchApprovalList,"onUpdate:modelValue":r[0]||(r[0]=$=>l(d).nameInBatchApprovalList=$),placeholder:""},null,8,["modelValue"])]),_:1}),e(B,{label:"GPN",prop:"gpn",class:"right-column"},{default:a(()=>[e(g,{modelValue:l(d).gpn,"onUpdate:modelValue":r[1]||(r[1]=$=>l(d).gpn=$),maxLength:"30",placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",Fe,[e(B,{label:"Email",prop:"emailAddress",class:"left-column"},{default:a(()=>[e(g,{modelValue:l(d).emailAddress,"onUpdate:modelValue":r[2]||(r[2]=$=>l(d).emailAddress=$),maxLength:"100",placeholder:""},null,8,["modelValue"])]),_:1}),e(B,{label:"UserName",prop:"userName",class:"right-column"},{default:a(()=>[e(g,{modelValue:l(d).userName,"onUpdate:modelValue":r[3]||(r[3]=$=>l(d).userName=$),maxLength:"50",placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",Te,[e(B,{label:"LPN",prop:"lpn",class:"left-column"},{default:a(()=>[e(g,{modelValue:l(d).lpn,"onUpdate:modelValue":r[4]||(r[4]=$=>l(d).lpn=$),maxLength:"20",placeholder:""},null,8,["modelValue"])]),_:1}),e(B,{class:"right-column"})])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}},Me=K(Ke,[["__scopeId","data-v-7d6b68a6"]]),He={class:"form-row"},Qe={class:"form-row"},je={class:"form-row"},Oe={class:"dialog-footer"},Ze={__name:"index",emits:["update:loading","handleUpdate"],setup(I,{expose:L,emit:R}){const C=R,y=m(""),u=m(null),v=m(0),p=m(!1),c=m(!1),k=M({form:{},queryParams:{pageNum:1,pageSize:10,nameInBatchApprovalList:null,gpn:null,emailAddress:null,userName:null,lpn:null},rules:{nameInBatchApprovalList:[{required:!0,message:"NameInBatch cannot be empty.",trigger:["change","blur"]}],gpn:[{required:!0,message:"GPN cannot be empty.",trigger:["change","blur"]}],emailAddress:[{required:!0,message:"EmailAddress cannot be empty.",trigger:["change","blur"]}],userName:[{required:!0,message:"UserName cannot be empty.",trigger:["change","blur"]}],lpn:[{required:!0,message:"LPN cannot be empty.",trigger:["change","blur"]}]}}),{form:n,rules:d}=H(k);function f(){p.value=!1,S()}function P(){f(),setTimeout(()=>{C("handleUpdate",v.value)},200)}function b(_){S(),v.value=_,p.value=!0,y.value=T.global.t("message.PendingView.1"),c.value=!0,re(_).then(t=>{n.value=t.data,c.value=!1})}function S(){n.value.nameInBatchApprovalList=null,n.value.gpn=null,n.value.emailAddress=null,n.value.userName=null,n.value.lpn=null}return L({handleView:b}),(_,t)=>{const s=i("el-input"),r=i("el-form-item"),g=i("el-form"),B=i("el-button"),D=i("el-dialog");return x(),J("div",null,[e(D,{modal:!1,title:y.value,modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=h=>p.value=h),width:"50%","close-on-click-modal":!1,"close-on-press-escape":!1,draggable:"",overflow:"",style:{border:"1px solid var(--el-color-primary)"}},{footer:a(()=>[N("div",Oe,[e(B,{type:"primary",onClick:P},{default:a(()=>[U(A(_.$t("message.PendingView.2")),1)]),_:1}),e(B,{onClick:f},{default:a(()=>[U(A(_.$t("message.PendingView.3")),1)]),_:1})])]),default:a(()=>[e(g,{ref_key:"formRef",ref:u,model:l(n),rules:l(d),"label-width":"auto"},{default:a(()=>[N("div",He,[e(r,{label:"NameInBatch",prop:"nameInBatchApprovalList",class:"left-column"},{default:a(()=>[e(s,{id:"firstField",modelValue:l(n).nameInBatchApprovalList,"onUpdate:modelValue":t[0]||(t[0]=h=>l(n).nameInBatchApprovalList=h),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"GPN",prop:"gpn",class:"right-column"},{default:a(()=>[e(s,{modelValue:l(n).gpn,"onUpdate:modelValue":t[1]||(t[1]=h=>l(n).gpn=h),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",Qe,[e(r,{label:"Email",prop:"emailAddress",class:"left-column"},{default:a(()=>[e(s,{modelValue:l(n).emailAddress,"onUpdate:modelValue":t[2]||(t[2]=h=>l(n).emailAddress=h),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"UserName",prop:"userName",class:"right-column"},{default:a(()=>[e(s,{modelValue:l(n).userName,"onUpdate:modelValue":t[3]||(t[3]=h=>l(n).userName=h),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1})]),N("div",je,[e(r,{label:"LPN",prop:"lpn",class:"left-column"},{default:a(()=>[e(s,{modelValue:l(n).lpn,"onUpdate:modelValue":t[4]||(t[4]=h=>l(n).lpn=h),readonly:!0,placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{class:"right-column"})])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}},Je=K(Ze,[["__scopeId","data-v-6ac9af40"]]),We={class:"app-container"},Xe={class:"total-records"},Ye=Pe({name:"PendingList"}),el=Object.assign(Ye,{setup(I){const{proxy:L}=Z(),R=m("/legaldb/prod-api/legaldatabase/pending/bulkImport"),C=m({Authorization:"Bearer "+we()}),y=m([]),u=m(!1),v=m(!1),p=m([]),c=m(!0),k=m(!0),n=m(null),d=m(null),f=m(null),P=m(null),b=m(0),S=M({queryParams:{pageNum:1,pageSize:Number(oe.local.get("displayPageRows"))||10}}),{queryParams:_}=H(S),t=Ve(()=>new Intl.NumberFormat().format(b.value));function s(o,V){y.value=o.rows,b.value=o.total,_.value=V,u.value=!1}function r(){L.$refs.searchForm.initGetList(status)}function g(){L.$refs.searchForm.resetQuery()}function B(o){if(!(o.size/1024/1024<2))return this.$message.error("The uploaded file size cannot exceed 2MB!"),!1;u.value=!0}function D(o,V){u.value=!1,o.code===200?(g(),L.$modal.msgSuccess("Batch import successful.")):o.code===500&&L.$modal.msgError(o.msg)}function h(){L.$modal.msgError("Batch import failed.")}const w=o=>{o=="upload"?W():o=="download"?$():L.$modal.msgError("Invalid command.")};function $(){T.global.locale=="en"?window.open("https://cri-riqnfw19m2zc7zaf-registry.oss-cn-shanghai.aliyuncs.com/legaldatabase/Pending%20User%20List%20Template%20%20%28HK%29.xlsx"):T.global.locale=="zhcn"?window.open("https://cri-riqnfw19m2zc7zaf-registry.oss-cn-shanghai.aliyuncs.com/legaldatabase/Pending%20User%20List%20Template%20%28CN%29.xlsx"):T.global.locale=="zhtw"&&window.open("https://cri-riqnfw19m2zc7zaf-registry.oss-cn-shanghai.aliyuncs.com/legaldatabase/Pending%20User%20List%20Template%20%20%28HK%29.xlsx")}const de=()=>{W()};function W(){P.value.$el.querySelector('input[type="file"]').click()}function ue(o){p.value=o.map(V=>V.id),c.value=o.length!=1,k.value=!o.length}function ie(){n.value.handleAdd()}function X(o){d.value.handleEdit(o)}function Y(o){f.value.handleView(o.id)}function me(o,V,Q){Y(o)}function ee(o){o.ctrlKey&&o.key==="j"&&(o.preventDefault(),v.value=!v.value)}return Ne(()=>{window.addEventListener("keydown",ee),r()}),Le(()=>{window.removeEventListener("keydown",ee)}),(o,V)=>{const Q=i("el-button"),le=i("el-col"),ae=i("el-dropdown-item"),pe=i("el-dropdown-menu"),ce=i("el-dropdown"),fe=i("right-toolbar"),ge=i("el-row"),E=i("el-table-column"),_e=i("el-table"),he=i("pagination"),ve=i("el-upload"),j=ne("hasPermi"),be=ne("loading");return x(),J("div",We,[e(l(Se),{ref:"searchForm",showSearch:l(v),loading:l(u),"onUpdate:loading":V[0]||(V[0]=q=>te(u)?u.value=q:null),onGetSearchResult:s},null,8,["showSearch","loading"]),e(ge,{gutter:10,class:"mb8"},{default:a(()=>[e(le,{span:1.5},{default:a(()=>[z((x(),F(Q,{type:"primary",icon:"Plus",onClick:ie},{default:a(()=>[U(A(o.$t("message.PendingList.1")),1)]),_:1})),[[j,["legaldatabase:PendingList:add"]]])]),_:1}),e(le,{span:1.5},{default:a(()=>[z((x(),F(ce,{"split-button":"",type:"primary",onCommand:w,onClick:de},{dropdown:a(()=>[e(pe,null,{default:a(()=>[e(ae,{command:"upload"},{default:a(()=>[U(A(o.$t("message.PendingList.3")),1)]),_:1}),e(ae,{command:"download"},{default:a(()=>[U(A(o.$t("message.PendingList.4")),1)]),_:1})]),_:1})]),default:a(()=>[U(A(o.$t("message.PendingList.2"))+" ",1)]),_:1})),[[j,["legaldatabase:PendingList:edit"]]])]),_:1}),e(fe,{showSearch:l(v),"onUpdate:showSearch":V[1]||(V[1]=q=>te(v)?v.value=q:null),onQueryTable:g},null,8,["showSearch"])]),_:1}),z((x(),F(_e,{data:l(y),onRowDblclick:me,onSelectionChange:ue},{default:a(()=>[e(E,{label:"ID",align:"left",prop:"id",width:"105"}),e(E,{label:"NameInBatchApprovalList",align:"left",prop:"nameInBatchApprovalList",width:"355"}),e(E,{label:"GPN",align:"left",prop:"gpn",width:"155"}),e(E,{label:"Email",align:"left",prop:"emailAddress",width:"305"}),e(E,{label:"UserName",align:"left",prop:"userName",width:"305"}),e(E,{label:"LPN",align:"left",prop:"lpn",width:"155"}),e(E,{label:o.$t("message.PendingList.5"),fixed:"right",align:"left",width:"110"},{default:a(q=>[z((x(),F(Q,{link:"",type:"primary",onClick:ye=>Y(q.row)},{default:a(()=>[U(A(o.$t("message.PendingList.6")),1)]),_:2},1032,["onClick"])),[[j,["legaldatabase:PendingList:view"]]]),z((x(),F(Q,{link:"",type:"primary",onClick:ye=>X(q.row.id)},{default:a(()=>[U(A(o.$t("message.PendingList.7")),1)]),_:2},1032,["onClick"])),[[j,["legaldatabase:PendingList:edit"]]])]),_:1},8,["label"])]),_:1},8,["data"])),[[be,l(u)]]),N("div",Xe,A(o.$t("message.DPNRequest.5"))+": "+A(l(t)),1),z(e(he,{total:l(b),page:l(_).pageNum,"onUpdate:page":V[2]||(V[2]=q=>l(_).pageNum=q),limit:l(_).pageSize,"onUpdate:limit":V[3]||(V[3]=q=>l(_).pageSize=q),onPagination:r},null,8,["total","page","limit"]),[[se,l(b)>0]]),e(l(Ee),{ref_key:"addDialog",ref:n,onRefreshData:g},null,512),e(l(Me),{ref_key:"editDialog",ref:d,onRefreshData:g},null,512),e(l(Je),{ref_key:"viewDialog",ref:f,onHandleUpdate:X},null,512),e(ve,{ref_key:"uploadRef",ref:P,accept:".xlsx",action:l(R),headers:l(C),"show-file-list":!1,name:"file","before-upload":B,"on-success":D,"on-error":h,style:{"margin-top":"-16px"}},null,8,["action","headers"])])}}}),al=K(el,[["__scopeId","data-v-41b85bac"]]);export{al as default};
