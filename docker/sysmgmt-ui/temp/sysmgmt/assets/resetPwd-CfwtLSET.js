import{i as b}from"./user-08E3g9Ea.js";import{K as _,r as $,h as u,o as V,j as h,e as l,d as o,f as a,m as p,z as i,v as y}from"./index-B_VQirsb.js";const k={__name:"resetPwd",setup(q){const{proxy:m}=y(),s=_({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),f=$({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(e,r,d)=>{s.newPassword!==r?d(new Error("两次输入的密码不一致")):d()},trigger:"blur"}]});function P(){m.$refs.pwdRef.validate(e=>{e&&b(s.oldPassword,s.newPassword).then(r=>{m.$modal.msgSuccess("修改成功")})})}function g(){m.$tab.closePage()}return(e,r)=>{const d=u("el-input"),n=u("el-form-item"),w=u("el-button"),c=u("el-form");return V(),h(c,{ref:"pwdRef",model:a(s),rules:a(f),"label-width":"180px"},{default:l(()=>[o(n,{label:e.$t("message.resetPwd.1"),prop:"oldPassword"},{default:l(()=>[o(d,{modelValue:a(s).oldPassword,"onUpdate:modelValue":r[0]||(r[0]=t=>a(s).oldPassword=t),placeholder:e.$t("message.resetPwd.4"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(n,{label:e.$t("message.resetPwd.2"),prop:"newPassword"},{default:l(()=>[o(d,{modelValue:a(s).newPassword,"onUpdate:modelValue":r[1]||(r[1]=t=>a(s).newPassword=t),placeholder:e.$t("message.resetPwd.5"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(n,{label:e.$t("message.resetPwd.3"),prop:"confirmPassword"},{default:l(()=>[o(d,{modelValue:a(s).confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=t=>a(s).confirmPassword=t),placeholder:e.$t("message.resetPwd.6"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(n,null,{default:l(()=>[o(w,{type:"primary",onClick:P},{default:l(()=>[p(i(e.$t("message.resetPwd.7")),1)]),_:1}),o(w,{type:"danger",onClick:g},{default:l(()=>[p(i(e.$t("message.resetPwd.8")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{k as default};
