(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecce6dae"],{"01f6":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e.createSuccess?o("div",{style:"border-bottom: 1px solid grey;margin-bottom: 10px;color:"+this.themeColor},[e._v(" Box Number "+e._s(e.boxPrefix)+e._s(e.boxSuffix)+" "+e._s(this.alreadyExists)+" ")]):e._e(),e.confirmSuccess?o("div",{style:"border-bottom: 1px solid grey;margin-bottom: 10px;color:"+this.themeColor},[e._v(" Operation completed ")]):e._e(),e.SearchBoxPane?o("el-form",{ref:"form",staticClass:"custom-form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"right","label-suffix":":"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByBoxNumber(t)}}},[o("div",{staticClass:"form-row"},[o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Box Number",prop:"boxNoPrefix"}},[o("div",{staticStyle:{display:"flex","flex-direction":"row"}},[o("el-input",{staticStyle:{width:"135px"},attrs:{maxlength:"10",clearable:"",placeholder:"Enter a prefix"},on:{input:e.handleInputLetters},model:{value:e.form.boxNoPrefix,callback:function(t){e.$set(e.form,"boxNoPrefix","string"===typeof t?t.trim():t)},expression:"form.boxNoPrefix"}}),e._v(" - "),o("el-input",{staticStyle:{width:"135px"},attrs:{maxlength:"10",clearable:"",placeholder:"Enter a suffix"},on:{input:e.handleInputNumber},model:{value:e.form.boxNoSuffix,callback:function(t){e.$set(e.form,"boxNoSuffix","string"===typeof t?t.trim():t)},expression:"form.boxNoSuffix"}})],1)]),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Location",prop:"deptId"}},[o("el-select",{attrs:{filterable:"",placeholder:"",clearable:""},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}},e._l(e.areaLocations,(function(e){return o("el-option",{key:e.deptId,attrs:{label:e.locationName,value:e.deptId}})})),1)],1),o("el-form-item",{staticClass:"custom-form-item"},[o("div",{staticStyle:{display:"flex","flex-direction":"row"}},[o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchByBoxNumber}},[e._v("Search")]),o("el-button",{attrs:{type:"primary",loading:e.btnCreationLoading},on:{click:e.createBox}},[e._v("Create")])],1)])],1)]):e._e(),e.InsertFiletoBoxPane_table?o("div",{staticStyle:{"margin-top":"25px"}},[o("span",[e._v("Your search return "+e._s(this.total)+" results.")]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.boxNoList,"cell-style":e.columnStyle,"header-cell-style":e.headerColStyle}},[o("el-table-column",{attrs:{label:"Box No",align:"center",width:"200",prop:"boxNumber"}}),o("el-table-column",{attrs:{label:"Location",align:"center",width:"200",prop:"areaLocation"}}),o("el-table-column",{attrs:{label:"File in this Box",align:"center",prop:"fileIDs"}}),o("el-table-column",{attrs:{label:"Actions",fixed:"right",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.insertFile(t.row.boxPrefix,t.row.boxSuffix)}}},[e._v(" Insert File ")])]}}],null,!1,745138624)})],1),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchByPaging}})],1):e._e(),e.SearchFilePane?o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"Box Number:"}},[o("el-col",{attrs:{span:3}},[o("el-input",{attrs:{readonly:""},model:{value:e.form.boxNoPrefix,callback:function(t){e.$set(e.form,"boxNoPrefix",t)},expression:"form.boxNoPrefix"}})],1),o("el-col",{staticStyle:{width:"10px","text-align":"center"},attrs:{span:3}},[e._v("-")]),o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{readonly:""},model:{value:e.form.boxNoSuffix,callback:function(t){e.$set(e.form,"boxNoSuffix",t)},expression:"form.boxNoSuffix"}})],1)],1)],1),o("el-form-item",{attrs:{label:"File ID:",prop:"fileID"}},[o("el-col",{attrs:{span:4}},[o("el-input",{ref:"fileIDTextField",attrs:{clearable:"",placeholder:""},on:{input:e.handleInputNumber},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchFile(t)}},model:{value:e.form.fileID,callback:function(t){e.$set(e.form,"fileID","string"===typeof t?t.trim():t)},expression:"form.fileID"}})],1),o("el-col",{staticStyle:{"text-align":"start","padding-left":"10px"},attrs:{span:3}},[o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.fetchFile}},[e._v("Fetch File")])],1)],1)],1):e._e(),e.SearchFileResultPane?o("div",[o("span",[e._v(" Total: "+e._s(e.selectedProfileList.length)+" ")]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.selectedProfileList,"cell-style":e.columnStyleForFile,"header-cell-style":e.headerColStyle},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{label:"File ID",align:"center",width:"150",prop:"oldSystemfileID"}}),o("el-table-column",{attrs:{label:"Group",align:"center",width:"400",prop:"clientGroupName"}}),o("el-table-column",{attrs:{label:"Client Name",align:"center",width:"400",prop:"clientCompanyName"}}),o("el-table-column",{attrs:{label:"Y.E.D.",align:"center",width:"200",prop:"yearEndDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.yearEndDate,"{y}-{m}-{d}")))])]}}],null,!1,2864419401)}),o("el-table-column",{attrs:{label:"File Type",align:"center",width:"200",prop:"fileType"}}),o("el-table-column",{attrs:{label:"Description",align:"center",width:"200",prop:"fileDescription"}}),o("el-table-column",{attrs:{label:"Available",align:"center",width:"220",prop:"avail"}}),o("el-table-column",{attrs:{label:"Binder No",align:"center",width:"150",prop:"binderNo"}}),o("el-table-column",{attrs:{label:"Box No",align:"center",width:"150",prop:"boxNumber"}}),o("el-table-column",{attrs:{label:"A.R.D.",align:"center",width:"200",prop:"auditReportDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.yearEndDate,"{y}-{m}-{d}")))])]}}],null,!1,2864419401)}),o("el-table-column",{attrs:{label:"File Status",align:"center",width:"200",prop:"state"}}),o("el-table-column",{attrs:{label:"Actions",fixed:"right",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.selectedProfileList)}}},[e._v(" Remove ")])]}}],null,!1,3102271372)})],1)],1):e._e(),this.ShowConfirmButton?o("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[o("el-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleConfirm}},[e._v("Confirm")])],1):e._e()],1)},a=[],r=o("ade3"),n=o("5530"),l=(o("ac1f"),o("466d"),o("d9e2"),o("00b4"),o("4de4"),o("d3b7"),o("5319"),o("14d9"),o("d81d"),o("a434"),o("3032")),s={data:function(){var e=function(e,t,o){t.match(/^[A-Za-z]+$/g)?o():o(new Error("Invalid BOX Prefix."))},t=function(e,t,o){/^[0-9][0-9]*$/.test(t)?o():o(new Error("Invalid BOX Suffix."))};return{mode:"search",createBoxDialogVisible:!1,areaLocations:[],form:{fileID:"",boxNoPrefix:"",boxNoSuffix:"",deptId:null},rules:{boxNoPrefix:[{required:!0,message:"Invalid BOX Prefix.",trigger:["click","blur"]},{validator:e,trigger:["click","blur"]}],boxNoSuffix:[{required:!0,message:"Invalid BOX Suffix.",trigger:["click","blur"]},{validator:t,trigger:["click","blur"]}],deptId:[{required:!0,message:"Invalid Location.",trigger:["click","blur"]}],fileID:[{required:!0,message:"Invalid FileID.",trigger:["click","blur"]},{min:1,max:12,message:"File ID length must be between 1 and 12 digits",trigger:"blur"}]},btnLoading:!1,loading:!1,btnCreationLoading:!1,confirmLoading:!1,SearchBoxPane:!0,InsertFiletoBoxPane_table:!1,SearchFilePane:!1,SearchFileResultPane:!1,createSuccess:!1,confirmSuccess:!1,boxNoList:[],selectedProfileList:[],returnedProfileList:[],queryParams:{pageNum:1,pageSize:10,boxNumber:"",deptId:null},total:0,alreadyExists:!1,boxPrefix:"",boxSuffix:"",count:0}},mounted:function(){this.initLocationList()},computed:{themeColor:{get:function(){return"#FFE600"==this.$store.state.settings.theme?"black":this.$store.state.settings.theme}},ShowConfirmButton:{get:function(){return this.selectedProfileList.filter((function(e){return"OK"==e.state})).length},set:function(e){}}},methods:Object(r["a"])({handleInputLetters:function(e){this.form.boxNoPrefix=e.replace(/[^a-zA-Z]/g,"")},handleInputNumber:function(e){this.form.boxNoSuffix=e.replace(/^(0+)|[^\d]/g,"")},initLocationList:function(){var e=this;Object(l["g"])({}).then((function(t){e.areaLocations=t.data})).catch((function(t){e.count<2&&(e.count++,setTimeout((function(){e.initLocationList()}),1e3))}))},formatConfirmedInfo:function(e,t){return"OK"==t?"FileID: "+e+" successfully inserted.":"FileID: "+e+" is not available for relocation."},searchByBoxNumber:function(){var e=this;this.mode="search",this.loading=!0,this.btnLoading=!0,this.createSuccess=!1,this.confirmSuccess=!1,this.queryParams.boxNumber=this.form.boxNoPrefix+""+this.form.boxNoSuffix,this.queryParams.deptId=this.form.deptId,this.queryParams.pageNum=1,this.queryParams.pageSize=10,Object(l["k"])(this.queryParams).then((function(t){e.InsertFiletoBoxPane_table=!0,e.boxNoList=t.rows,e.total=t.total,e.loading=!1,e.btnLoading=!1,e.$refs["form"].clearValidate()})).catch((function(t){e.loading=!1,e.btnLoading=!1}))},createBox:function(){var e=this;this.mode="create",this.$refs["form"].validate((function(t){if(t){var o={boxPrefix:e.form.boxNoPrefix,boxSuffix:e.form.boxNoSuffix,areaLocation:e.areaLocations.filter((function(t){return t.deptId==e.form.deptId}))[0].locationName,deptId:e.form.deptId};e.handleCreatingBox(o)}}))},handleCreatingBox:function(e){var t=this;this.btnCreationLoading=!0,Object(l["c"])(e).then((function(e){t.alreadyExists="1"==e.msg?"already exists":"created",t.btnCreationLoading=!1,t.createSuccess=!0,t.boxPrefix=t.form.boxNoPrefix,t.boxSuffix=t.form.boxNoSuffix,t.InsertFiletoBoxPane_table=!0,t.boxNoList.length=0,t.boxNoList.push(e.data),t.total=0})).catch((function(e){t.btnCreationLoading=!1}))},handleSelectionChange:function(){},searchByPaging:function(){var e=this;this.loading=!0,Object(l["k"])(this.queryParams).then((function(t){e.InsertFiletoBoxPane_table=!0,e.boxNoList=t.rows,e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1}))},insertFile:function(e,t){var o=this;this.$confirm("Insert Files into this box?","Info",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then((function(){o.InsertFiletoBoxPane_table=!1,o.SearchBoxPane=!1,o.SearchFilePane=!0,o.form.fileID="",o.form.boxNoPrefix=e,o.form.boxNoSuffix=t,setTimeout((function(){o.$refs.form.clearValidate()}),10)})).catch((function(){}))},clearInputBoxForNextEntry:function(){this.form.fileID="",this.$refs.fileIDTextField.focus()},fetchFile:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var o=e.selectedProfileList.filter((function(t){return t.oldSystemfileID==e.form.fileID})).length>0;if(o)return e.$modal.msgError("File ID:"+e.form.fileID+" already exists in the list"),void e.clearInputBoxForNextEntry();e.loading=!0,e.btnLoading=!0,Object(l["e"])({fileID:e.form.fileID}).then((function(t){if(void 0!=t.data){var o=Object(n["a"])({state:""!=t.data.boxNumber&&null!=t.data.boxNumber||1==t.data.borrowState?"Status not allowed":"OK"},t.data);e.selectedProfileList.push(o)}else{var i={oldSystemfileID:e.form.fileID,state:"Not in database",yearEndDate:"0000-00-00"};e.selectedProfileList.push(i)}e.SearchFileResultPane=!0,e.total=e.selectedProfileList.length,e.loading=!1,e.btnLoading=!1,e.clearInputBoxForNextEntry()})).catch((function(t){e.loading=!1,e.btnLoading=!1,e.clearInputBoxForNextEntry()}))}}))},handleConfirm:function(){var e=this;this.confirmLoading=!0;var t={boxNumber:this.form.boxNoPrefix+""+this.form.boxNoSuffix,fileIDs:this.selectedProfileList.filter((function(e){return"OK"==e.state})).map((function(e){return e.oldSystemfileID}))};Object(l["b"])(t).then((function(t){e.createSuccess=!1,e.confirmLoading=!1,e.confirmSuccess=!0,e.SearchBoxPane=!0,e.InsertFiletoBoxPane_table=!1,e.SearchFilePane=!1,e.SearchFileResultPane=!1,e.form.fileID="",e.form.boxNoPrefix="",e.form.boxNoSuffix="",e.form.deptId=null,e.boxNoList=[],e.selectedProfileList=[]})).catch((function(t){e.confirmLoading=!1}))},deleteRow:function(e,t){t.splice(e,1)},firstColumnStyle:function(e,t,o,i){return"color: black;padding:0px 0px;"},columnStyleForFile:function(e,t,o,i){return"OK"!=e.row.state?"color: red;padding:0px 0px;":"color: #13ce66;padding:0px 0px;"},columnStyle:function(e,t,o,i){return"color: black;padding:0px 0px;"},headerColStyle:function(e,t,o,i){return"padding:0px 0px;height:10px"}},"handleInputNumber",(function(e){this.form.fileID=e.replace(/[^\d]/g,"")}))},c=s,f=(o("2ef4"),o("2877")),u=Object(f["a"])(c,i,a,!1,null,"76b86532",null);t["default"]=u.exports},"2ef4":function(e,t,o){"use strict";o("f7ac")},"466d":function(e,t,o){"use strict";var i=o("c65b"),a=o("d784"),r=o("825a"),n=o("7234"),l=o("50c4"),s=o("577e"),c=o("1d80"),f=o("dc4a"),u=o("8aa5"),d=o("14c3");a("match",(function(e,t,o){return[function(t){var o=c(this),a=n(t)?void 0:f(t,e);return a?i(a,t,o):new RegExp(t)[e](s(o))},function(e){var i=r(this),a=s(e),n=o(t,i,a);if(n.done)return n.value;if(!i.global)return d(i,a);var c=i.unicode;i.lastIndex=0;var f,m=[],x=0;while(null!==(f=d(i,a))){var b=s(f[0]);m[x]=b,""===b&&(i.lastIndex=u(a,l(i.lastIndex),c)),x++}return 0===x?null:m}]}))},f7ac:function(e,t,o){}}]);