(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e58916d4"],{"062c":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container",staticStyle:{"background-color":"white"}},[o("BoxProfileSearch",{ref:"boxSearch",attrs:{loading:e.loading,show:e.showSearch,pageSize:e.queryParams.pageSize},on:{whenChangeDeptId:e.whenChangeDeptId,getResult:e.receiveSearchResult,resetPageInfo:e.resetPageInfo,"update:loading":function(t){e.loading=t},"update:show":function(t){e.showSearch=t},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)}}}),""!=this.newFileID?o("div",{staticStyle:{width:"100%","text-align":"center",height:"auto","margin-bottom":"10px"}},[o("el-tag",{staticClass:"custom-tag",style:"background-color:"+this.$store.state.settings.theme+";--themeColor:"+this.themeColor,attrs:{effect:"dark",type:"success"}},[e._v(" "+e._s(e.title)+" - "+e._s(this.newFileID)+" "),o("i",{staticClass:"el-icon-copy-document",staticStyle:{cursor:"pointer","padding-left":"10px"},attrs:{id:"copyNode"}}),o("i",{staticClass:"el-icon-download",staticStyle:{cursor:"pointer","padding-left":"10px"},attrs:{id:"exportNode"},on:{click:e.handleSingleExport}})])],1):e._e(),o("div",[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:1.5}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("New")])],1),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-dropdown",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["filingsystem:profile:export"],expression:"['filingsystem:profile:export']"}],on:{command:e.exportSearchData}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"}},[e._v(" Export Data"),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"Export Selected"}},[e._v("Export Selected")]),o("el-dropdown-item",{attrs:{command:"Export All"}},[e._v("Export All")])],1)],1)],1):e._e(),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-button",{staticStyle:{width:"155px"},attrs:{type:"primary",icon:"el-icon-set-up"},on:{click:e.handleDestoryBox}},[e._v("Destroy Box")])],1):e._e(),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-button",{staticStyle:{width:"155px"},attrs:{type:"primary",icon:"el-icon-s-finance"},on:{click:e.handlePermOut}},[e._v("Perm Out")])],1):e._e(),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-button",{staticStyle:{width:"155px"},attrs:{type:"primary",icon:"el-icon-s-finance"},on:{click:e.handleEditCharge}},[e._v("Edit Charge")])],1):e._e(),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.handleUploadApprovalFiles}},[e._v("Upload Approvals")])],1):e._e(),e.showAllButtons?o("el-col",{attrs:{span:1.5}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e.handleUploadFileDetails}},[e._v("Upload Details")])],1):e._e(),o("right-toolbar",{attrs:{showSearch:e.showSearch,columns:e.columns},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.searchByPaging}})],1)],1),e.showTable?o("div",{staticStyle:{padding:"5px 0px"}},[e._v("Your search return "+e._s(this.total)+" results.")]):e._e(),e.showTable?o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{border:"",data:e.profileList,"cell-style":e.columnStyle,"header-cell-style":e.headerColStyle,"row-style":e.rowStyle,"row-key":function(e){return e.deptId+"-"+e.id}},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[o("el-table-column",{key:Math.random(),attrs:{"reserve-selection":!0,type:"selection",width:"55",align:"center"}}),e.columns[0].visible?o("el-table-column",{key:Math.random(),attrs:{fixed:"",label:"Box No",align:"center",width:"140",prop:"boxNumber"}}):e._e(),e.columns[1].visible?o("el-table-column",{key:Math.random(),attrs:{label:"ID",align:"center",width:"140",prop:"id"}}):e._e(),e.columns[2].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Dept ID",align:"center",width:"140",prop:"deptId"}}):e._e(),e.columns[3].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Raw Data",align:"center",width:"140",prop:"oldSystemboxMark"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(0==t.row.oldSystemboxMark?"Y":"N"))])]}}],null,!1,2039141382)}):e._e(),e.columns[4].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Box Department",align:"center",width:"140",prop:"boxDepartment"}}):e._e(),e.columns[5].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Vendor Number",align:"center",width:"140",prop:"vendorNumber"}}):e._e(),e.columns[6].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Vendor Barcode",align:"center",width:"140",prop:"vendorBarcode"}}):e._e(),e.columns[7].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Retention Date",align:"center",prop:"retentionDate",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.retentionDate,"{y}-{m}-{d}")))])]}}],null,!1,2710040573)}):e._e(),e.columns[8].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Charge Code",align:"center",width:"140",prop:"chargeCode"}}):e._e(),e.columns[9].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Approver LPN",align:"center",width:"140",prop:"approvedstaffidLpn"}}):e._e(),e.columns[10].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Approver Email",align:"center",width:"255",prop:"approverEmail"}}):e._e(),e.columns[11].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Requester LPN",align:"center",width:"140",prop:"staffidLpn"}}):e._e(),e.columns[12].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Requester Email",align:"center",width:"255",prop:"requesterEmail"}}):e._e(),e.columns[13].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Box Status",align:"center",width:"140",prop:"boxState"}}):e._e(),e.columns[14].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Location",align:"center",width:"140",prop:"areaLocation"}}):e._e(),e.columns[15].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Borrow State",align:"center",width:"140",prop:"borrowState"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(0==t.row.borrowState?"Available":"Not Available"))])]}}],null,!1,429398756)}):e._e(),e.columns[16].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Borrower LPN",align:"center",width:"140",prop:"borrowerStaffId"}}):e._e(),e.columns[17].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Borrower Name",align:"center",width:"255",prop:"borrowerName"}}):e._e(),e.columns[18].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Destruction Time",align:"center",width:"255",prop:"destructionTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.destructionTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}],null,!1,1514640546)}):e._e(),e.columns[19].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Destruction Officer",align:"center",width:"255",prop:"destructionPeople"}}):e._e(),e.columns[20].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Create Time",align:"center",width:"255",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}],null,!1,1080907512)}):e._e(),e.columns[21].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Create By",align:"center",width:"255",prop:"createBy"}}):e._e(),e.columns[22].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Update Time",align:"center",width:"255",prop:"updateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.parseTime(t.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}],null,!1,3807545165)}):e._e(),e.columns[23].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Update By",align:"center",width:"255",prop:"updateBy"}}):e._e(),e.columns[24].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Account Code",align:"center",width:"140",prop:"accountCode"}}):e._e(),e.columns[25].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Box Remark",align:"center",width:"400",prop:"boxRemark"}}):e._e(),e.columns[26].visible?o("el-table-column",{key:Math.random(),attrs:{label:"Approval Files",align:"center",width:"355",prop:"approvalFiles"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.approvalFiles,(function(i){return o("ul",{key:Math.random(),staticClass:"horizontal-list-flex"},[o("FileLink",{attrs:{file:i,row:t.row},on:{removeFileLink:e.removeApprovalFileLink}})],1)}))}}],null,!1,2465252904)}):e._e(),e.columns[27].visible?o("el-table-column",{key:Math.random(),attrs:{label:"File Details",align:"center",width:"355",prop:"fileDetails"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.fileDetails,(function(i){return o("ul",{key:Math.random(),staticClass:"horizontal-list-flex"},[o("FileLink",{attrs:{file:i,row:t.row},on:{removeFileLink:e.removeDetailsFileLink}})],1)}))}}],null,!1,1997855547)}):e._e(),o("el-table-column",{attrs:{fixed:"right",label:"Actions",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small",disabled:"DESTROYED"==t.row.boxState||"PERM OUT"==t.row.boxState},on:{click:function(o){return e.handleEdit(t.row,t.$index)}}},[e._v("Edit")]),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.willHistory(t.row.boxNumber)}}},[e._v("History")])]}}],null,!1,2198101643)})],1):e._e(),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchByPaging}}),o("BoxProfileEditor",{ref:"editor",attrs:{open:e.open,title:e.title,mode:e.mode},on:{"update:open":function(t){e.open=t},"update:title":function(t){e.title=t},"update:mode":function(t){e.mode=t},closeEditor:e.closeEditor,addThenQuery:e.addThenQuery,refreshTableRow:e.refreshTableRow}}),o("BoxProfileExportConfirm",{attrs:{open:e.showExportConfirm,multipleSelection:e.multipleSelection,exportAll:e.exportAll,total:e.total},on:{"update:open":function(t){e.showExportConfirm=t},"update:multipleSelection":function(t){e.multipleSelection=t},"update:multiple-selection":function(t){e.multipleSelection=t},"update:exportAll":function(t){e.exportAll=t},"update:export-all":function(t){e.exportAll=t},"update:total":function(t){e.total=t},closeExportConfirm:e.closeExportConfirm,confirmToExport:e.confirmToExport}}),o("DestoryBox",{attrs:{open:e.showDestoryBox,multipleSelection:e.multipleSelection},on:{"update:open":function(t){e.showDestoryBox=t},"update:multipleSelection":function(t){e.multipleSelection=t},"update:multiple-selection":function(t){e.multipleSelection=t},closeDestoryBox:e.closeDestoryBox,confirmToDestory:e.confirmToDestory}}),o("PermOutBox",{attrs:{open:e.showPermOut,multipleSelection:e.multipleSelection},on:{"update:open":function(t){e.showPermOut=t},"update:multipleSelection":function(t){e.multipleSelection=t},"update:multiple-selection":function(t){e.multipleSelection=t},closePermOut:e.closePermOut,confirmToPermOut:e.confirmToPermOut}}),o("BoxProfileChargeEditor",{ref:"chargeEditor",attrs:{multipleSelection:e.multipleSelection},on:{fillBackChargeCode:e.fillBackChargeCode}}),o("UploadApprovalFiles",{ref:"uaf",attrs:{open:e.showUploadApprovalFiles,multipleSelection:e.multipleSelection},on:{"update:open":function(t){e.showUploadApprovalFiles=t},"update:multipleSelection":function(t){e.multipleSelection=t},"update:multiple-selection":function(t){e.multipleSelection=t},closeUploadApprovalFiles:e.closeUploadApprovalFiles,finished:e.finishedUploadApprovalFiles}}),o("UploadFileDetails",{ref:"ufd",attrs:{open:e.showUploadFileDetails,multipleSelection:e.multipleSelection},on:{"update:open":function(t){e.showUploadFileDetails=t},"update:multipleSelection":function(t){e.multipleSelection=t},"update:multiple-selection":function(t){e.multipleSelection=t},closeUploadFileDetails:e.closeUploadFileDetails,finished:e.finishedUploadFileDetails}})],1)},a=[],n=o("5530"),l=(o("a9e3"),o("d81d"),o("d3b7"),o("159b"),o("7db0"),o("14d9"),o("4de4"),o("b311")),r=o.n(l),s=o("4ce7"),c=o("6e56"),d=o("ed08"),u=o("c38a"),p=o("3ead"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,visible:e.open,width:"1250px","append-to-body":"","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.open=t}}},[o("iframe",{staticStyle:{display:"none"},attrs:{name:"stop"}}),o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.btnLoading,expression:"btnLoading"}],ref:"form",staticClass:"custom-form",attrs:{model:e.form,rules:e.skipValidating?{}:e.rules,"label-width":"auto","label-suffix":"",action:"http://",target:"stop"}},[o("div",{staticClass:"form-row"},[o("el-form-item",{staticClass:"custom-form-item",attrs:{prop:"vendorBarcode"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Vendor Barcode "),o("el-tooltip",{attrs:{content:"供应商条形码",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("el-input",{staticClass:"input-width",attrs:{name:"vendorBarcode",maxlength:"8","auto-complete":"on"},model:{value:e.form.vendorBarcode,callback:function(t){e.$set(e.form,"vendorBarcode","string"===typeof t?t.trim():t)},expression:"form.vendorBarcode"}})],1),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Charge Code",prop:"chargeCode"}},[o("el-input",{staticClass:"input-width",attrs:{name:"chargeCode",maxlength:"8","auto-complete":"on"},model:{value:e.form.chargeCode,callback:function(t){e.$set(e.form,"chargeCode","string"===typeof t?t.trim():t)},expression:"form.chargeCode"}})],1),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Account Code",prop:"accountCode"}},[o("el-input",{staticClass:"input-width",attrs:{name:"accountCode",maxlength:"8","auto-complete":"on"},model:{value:e.form.accountCode,callback:function(t){e.$set(e.form,"accountCode","string"===typeof t?t.trim():t)},expression:"form.accountCode"}})],1)],1),o("div",{staticClass:"form-row"},[o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Box Remark",prop:"boxRemark"}},[o("el-input",{staticClass:"input-width",attrs:{name:"boxRemark",maxlength:"8","auto-complete":"on"},model:{value:e.form.boxRemark,callback:function(t){e.$set(e.form,"boxRemark","string"===typeof t?t.trim():t)},expression:"form.boxRemark"}})],1),o("el-form-item",{staticClass:"custom-form-item",attrs:{prop:"boxDepartment"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Box Department "),o("el-tooltip",{attrs:{content:"财务部门",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("el-input",{staticClass:"input-width",attrs:{name:"boxDepartment",maxlength:"8","auto-complete":"on"},model:{value:e.form.boxDepartment,callback:function(t){e.$set(e.form,"boxDepartment","string"===typeof t?t.trim():t)},expression:"form.boxDepartment"}})],1),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Box No",prop:"boxNumber"}},[o("el-input",{staticClass:"input-width",attrs:{name:"BoxNumber",maxlength:"50",disabled:1==e.form.borrowState,"auto-complete":"on"},model:{value:e.form.boxNumber,callback:function(t){e.$set(e.form,"boxNumber","string"===typeof t?t.trim():t)},expression:"form.boxNumber"}})],1)],1),o("div",{staticClass:"form-row"},[o("el-form-item",{staticClass:"custom-form-item",attrs:{prop:"approverLPN"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Approver LPN "),o("el-tooltip",{attrs:{content:"审批人的LPN",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("div",{staticStyle:{display:"flex","flex-direction":"row",width:"100%"}},[o("el-input",{staticClass:"input-width",attrs:{name:"approverLPN",maxlength:"100",autocomplete:e.autocompleteEIC,clearable:""},on:{focus:e.handleEICFocus},model:{value:e.form.approverLPN,callback:function(t){e.$set(e.form,"approverLPN",t)},expression:"form.approverLPN"}}),o("el-button",{staticStyle:{"background-color":"#F5F7FA"},attrs:{icon:"el-icon-refresh",loading:e.approverLPNLoading},on:{click:e.handleFetchApproverByLPN}})],1)]),o("el-form-item",{staticClass:"custom-form-item",attrs:{prop:"approverEmail"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Approver Email "),o("el-tooltip",{attrs:{content:"审批人的邮箱",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("div",{staticStyle:{display:"flex","flex-direction":"row",width:"100%"}},[o("el-input",{staticClass:"input-width",attrs:{name:"approverEmail",maxlength:"255","auto-complete":"on"},model:{value:e.form.approverEmail,callback:function(t){e.$set(e.form,"approverEmail",t)},expression:"form.approverEmail"}}),o("el-button",{staticStyle:{"background-color":"#F5F7FA"},attrs:{icon:"el-icon-refresh",loading:e.approverEmailLoading},on:{click:e.handleFetchApproverByEmail}})],1)]),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Requester LPN",prop:"requesterLPN"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Requester LPN "),o("el-tooltip",{attrs:{content:"申请人的LPN",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("div",{staticStyle:{display:"flex","flex-direction":"row",width:"100%"}},[o("el-input",{staticClass:"input-width",attrs:{name:"requesterLPN",maxlength:"100",autocomplete:e.autocompletePIC,clearable:"","auto-complete":"on"},on:{focus:e.handlePICFocus},model:{value:e.form.requesterLPN,callback:function(t){e.$set(e.form,"requesterLPN",t)},expression:"form.requesterLPN"}}),o("el-button",{staticStyle:{"background-color":"#F5F7FA"},attrs:{icon:"el-icon-refresh",loading:e.requesterLPNLoading},on:{click:e.handleFetchRequesterByLPN}})],1)])],1),o("div",{staticClass:"form-row"},[o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Requester Email",prop:"requesterEmail"}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Requester Email "),o("el-tooltip",{attrs:{content:"申请人的邮箱",placement:"top"}},[o("i",{staticClass:"el-icon-question"})])],1),o("div",{staticStyle:{display:"flex","flex-direction":"row",width:"100%"}},[o("el-input",{staticClass:"input-width",attrs:{name:"requesterEmail","auto-complete":"on"},model:{value:e.form.requesterEmail,callback:function(t){e.$set(e.form,"requesterEmail",t)},expression:"form.requesterEmail"}}),o("el-button",{staticStyle:{"background-color":"#F5F7FA"},attrs:{icon:"el-icon-refresh",loading:e.requesterEmailLoading},on:{click:e.handleFetchRequesterByEmail}})],1)]),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Retention Date",prop:"retentionDate"}},[o("el-date-picker",{staticClass:"input-width",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.retentionDate,callback:function(t){e.$set(e.form,"retentionDate",t)},expression:"form.retentionDate"}})],1),o("el-form-item",{staticClass:"custom-form-item",attrs:{label:"Location",prop:"areaLocation"}},[o("el-select",{staticClass:"input-width",attrs:{filterable:"",disabled:"Insert"!=e.mode},model:{value:e.form.areaLocation,callback:function(t){e.$set(e.form,"areaLocation",t)},expression:"form.areaLocation"}},e._l(e.areaLocations,(function(e){return o("el-option",{key:e.deptId,attrs:{label:e.locationName,value:e.locationName}})})),1)],1)],1)]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v(e._s(e.buttonText))]),o("el-button",{on:{click:e.cancel}},[e._v("Cancel")]),o("el-button",{on:{click:e.resetForm}},[e._v("Reset")])],1)],1)},f=[],h=o("c7eb"),g=o("1da1"),b=(o("e9c4"),o("b64b"),o("caad"),o("2532"),o("3032")),v=o("aa3a"),y=o("d7a3"),x={name:"FileProfileEditor",components:{},props:{open:{required:!0,type:Boolean,default:!1},title:{required:!0,type:String},mode:{required:!0,type:String}},data:function(){return{autocompleteEIC:"new-password",autocompletePIC:"new-password",btnLoading:!1,aeLoading:!1,rlLoading:!1,reLoading:!1,approverLPNLoading:!1,requesterLPNLoading:!1,approverEmailLoading:!1,requesterEmailLoading:!1,isEngagementLoading:!1,isStaffLoading:!1,isStaffIDLoading:!1,areaLocations:[],fileTypes:["A","T","I","O"],retentionPeriods:[],dpn:["Y","N"],fileStates:["LOSE"],newFileID:"",skipValidating:!1,newBoxNumber:"",form:{vendorBarcode:null,chargeCode:null,accountCode:null,boxRemark:null,boxDepartment:null,engagementNumber:null,approverLPN:null,approverEmail:null,requesterLPN:null,requesterEmail:null,boxNumber:"",deptId:null,areaLocation:"",fileDescription:"",clientNumber:"",clientCompanyName:"",fileType:"",fileState:null,yearEndDate:null,auditReportDate:null,engagementEIC:"",engagementEICEmail:"",engagementPartner:"",engagementPartnerEmail:"",moveTo:"",fileremarks:"",clientGroupName:"",ccId:"",retentionPeriod:10,isDPN:"",staffId:"",requesterName:"",newFileState:"",engagementName:"",engagementCode:"",serviceLine:""},rules:{engagementNumber:[{required:!0,message:"Engagement Code cannot be blank",trigger:["blur","change"]},{min:8,max:8,message:"Please enter 8 characters",trigger:["blur","click"]}],vendorBarcode:[{required:!0,message:"Vendor Barcode cannot be blank",trigger:["blur","change"]},{min:8,max:8,message:"Please enter 8 characters",trigger:["blur","change"]}],chargeCode:[{required:!0,message:"Charge Code cannot be blank",trigger:["blur","change"]},{min:8,max:8,message:"Please enter 8 characters",trigger:["blur","click"]}],accountCode:[{required:!0,message:"Account Code cannot be blank",trigger:["blur","change"]},{min:8,max:8,message:"Please enter 8 characters",trigger:["blur","click"]}],boxNumber:[{required:!0,message:"Box No cannot be blank",trigger:["blur","change"]}],boxDepartment:[{required:!0,message:"Box Department EIC cannot be blank",trigger:["blur","change"]}],approverEmail:[{required:!0,message:"Engagement EIC Email cannot be blank",trigger:"blur"},{type:"email",message:"Please enter a correct email address",trigger:["blur","change"]}],approverLPN:[{required:!0,message:"Approver LPN cannot be blank",trigger:["blur","change"]}],requesterEmail:[{required:!0,message:"Requester Email cannot be blank",trigger:"blur"},{type:"email",message:"Please enter a correct email address",trigger:["blur","change"]}],requesterLPN:[{required:!0,message:"Requester LPN cannot be blank",trigger:["blur","change"]}],retentionDate:[{required:!0,message:"Retention Date cannot be blank",trigger:"change"}],areaLocation:[{required:!0,message:"Location cannot be blank",trigger:"change"}]}}},computed:{buttonText:{get:function(){return"Insert"==this.mode?"Save":"Update"},set:function(e){}},eyPrimaryColor:{get:function(){return this.$store.state.settings.theme},set:function(e){}}},mounted:function(){this.fetchData()},methods:{handleGetProfile:function(e){var t=this;Object(s["d"])(e).then((function(e){e.data?(t.form=e.data,t.form.createTime=null,t.form.updateTime=null):t.$message.error("数据不存在")}))},handleAdd:function(){var e=this;return Object(g["a"])(Object(h["a"])().mark((function t(){var o;return Object(h["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["form"].validate();case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return");case 5:return e.formToUpperCase(),e.form.deptId=e.areaLocations.filter((function(t){return t.locationName==e.form.areaLocation}))[0].deptId,e.$cache.local.set("filingBoxProfileFormData",JSON.stringify(e.form)),t.next=10,e.handleAddProfile();case 10:case"end":return t.stop()}}),t)})))()},handleUpdate:function(){var e=this;return Object(g["a"])(Object(h["a"])().mark((function t(){var o;return Object(h["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$cache.local.set("filingBoxProfileFormData",JSON.stringify(e.form)),1!=e.form.oldSystemFileMark){t.next=7;break}return t.next=4,e.$refs["form"].validate();case 4:if(o=t.sent,o){t.next=7;break}return t.abrupt("return");case 7:return e.formToUpperCase(),t.next=10,e.handleUpdateBoxProfile();case 10:case"end":return t.stop()}}),t)})))()},handleAddProfile:function(){var e=this;this.btnLoading=!0,Object(s["a"])(this.form).then((function(t){e.$modal.msgSuccess("Added successfully"),e.newBoxNumber=t.data.boxNumber,e.btnLoading=!1,e.returnNewFileID(),e.$emit("addThenQuery",e.newBoxNumber,e.form.deptId)})).catch((function(t){e.btnLoading=!1}))},handleUpdateBoxProfile:function(){var e=this;this.btnLoading=!0,Object(s["j"])(this.form).then((function(t){e.$modal.msgSuccess("Updated successfully"),e.btnLoading=!1,e.returnNewFileID(),e.$emit("refreshTableRow",t.data)})).catch((function(t){e.btnLoading=!1}))},getRetentionPeriods:function(){var e=this;return Object(v["d"])("filingsystem_retention_period").then((function(t){e.retentionPeriods=t.data.map((function(e){return{key:Number(e.dictValue),value:e.dictLabel}}))})).catch((function(e){console.error("Error fetching retention periods:",e)}))},getAreaLocations:function(){var e=this;return Object(b["g"])({}).then((function(t){e.areaLocations=t.data})).catch((function(e){console.error("Error fetching area locations:",e)}))},delay:function(e){return new Promise((function(t){return setTimeout(t,e)}))},fetchData:function(){var e=this;return Object(g["a"])(Object(h["a"])().mark((function t(){return Object(h["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRetentionPeriods();case 2:return t.next=4,e.delay(1010);case 4:return t.next=6,e.getAreaLocations();case 6:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.$refs["form"].resetFields()},fileTypeChange:function(e){"T"==e?this.$delete(this.rules,"auditReportDate"):this.$set(this.rules,"auditReportDate",[{required:!0,message:"AuditReportDate cannot be blank",trigger:["blur","change"]}])},handleEICFocus:function(e){this.autocompleteEIC="on",this.autocompletePIC="new-password"},handlePICFocus:function(e){this.autocompleteEIC="new-password",this.autocompletePIC="on"},cancel:function(){this.$emit("closeEditor","")},returnNewFileID:function(){this.$emit("closeEditor",this.newFileID)},submitForm:function(){this.$refs["form"].$el.submit(),this.newFileID="","Insert"==this.mode?this.handleAdd():this.handleUpdate()},handleFetchApproverByEmail:function(){var e=this;this.$refs["form"].validateField("approverEmail",(function(t){var o=""==t;if(o||0==e.form.oldSystemFileMark){e.approverEmailLoading=!0;var i={email:e.form.approverEmail};Object(c["e"])(i).then((function(t){e.form.approverLPN=t.data.lpn,e.approverEmailLoading=!1})).catch((function(t){console.log(t),e.approverEmailLoading=!1}))}}))},handleFetchRequesterByEmail:function(){var e=this;this.$refs["form"].validateField("requesterEmail",(function(t){var o=""==t;if(o||0==e.form.oldSystemFileMark){e.requesterEmailLoading=!0;var i={email:e.form.requesterEmail};Object(c["e"])(i).then((function(t){e.form.requesterLPN=t.data.lpn,e.requesterEmailLoading=!1})).catch((function(t){console.log(t),e.requesterEmailLoading=!1}))}}))},handleFetchApproverByLPN:function(){var e=this;this.$refs["form"].validateField("approverLPN",(function(t){var o=""==t;if(o||0==e.form.oldSystemFileMark){e.approverLPNLoading=!0;var i={lpn:e.form.approverLPN};Object(y["c"])(i).then((function(t){e.form.approverEmail=t.data.staffEmail,e.approverLPNLoading=!1})).catch((function(t){console.log(t),e.approverLPNLoading=!1}))}}))},handleFetchRequesterByLPN:function(){var e=this;this.$refs["form"].validateField("requesterLPN",(function(t){var o=""==t;if(o||0==e.form.oldSystemFileMark){e.requesterLPNLoading=!0;var i={lpn:e.form.requesterLPN};Object(y["c"])(i).then((function(t){e.form.requesterEmail=t.data.staffEmail,e.requesterLPNLoading=!1})).catch((function(t){console.log(t),e.requesterLPNLoading=!1}))}}))},restoreForm:function(){var e=localStorage.getItem("filingBoxProfileFormData");if(e){var t=JSON.parse(e);this.form=t;var o=this.areaLocations.map((function(e){return e.locationName})),i=o.includes(this.form.areaLocation);i||(this.form.areaLocation=null),this.form.deptId=null}},formToUpperCase:function(){for(var e in this.form)"approverEmail"==e||"requesterEmail"==e||null!=this.form[e]&&(this.form[e]=(this.form[e]+"").toUpperCase())}}},w=x,C=(o("7bb1"),o("2877")),S=Object(C["a"])(w,m,f,!1,null,"67ddfb61",null),k=S.exports,L=o("8f24"),P=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"Destory Confirmation",visible:e.open,width:"550px",top:"50%","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleCancel},on:{"update:visible":function(t){e.open=t}}},[o("div",[o("span",{staticStyle:{"font-size":"larger"}},[e._v("In total, "+e._s(this.multipleSelection.length)+" rows have been selected.")]),o("span",[o("div",{staticStyle:{"max-height":"300px","overflow-y":"scroll","margin-top":"20px"}},[o("ul",{staticClass:"horizontal-list"},e._l(e.multipleSelection,(function(t,i){return o("li",{key:Math.random(),style:"color: "+(e.isSelectedBoxState(t)?"red":"")},[e._v(" "+e._s(t.boxNumber)+e._s(i<e.multipleSelection.length-1?",":"")+" ")])})),0)])])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handleDestory}},[e._v("Destory")])],1)])},D=[],E={name:"DestoryBox",components:{},props:{open:{required:!0,type:Boolean,default:!1},multipleSelection:{required:!0,type:Array,default:[]}},data:function(){return{btnLoading:!1}},computed:{btnDisabled:{get:function(){var e=this.multipleSelection.filter(this.isSelectedBoxState);return(null===e||void 0===e?void 0:e.length)>0}}},mounted:function(){},methods:{isSelectedBoxState:function(e){return"DESTROYED"===e.boxState||"PERM OUT"===e.boxState},stopLoading:function(){this.btnLoading=!1},handleCancel:function(){this.$emit("closeDestoryBox")},handleDestory:function(){var e=this;this.$prompt("Please input a charge code","Input",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputPattern:/^.{1,100}$/,inputErrorMessage:"The input length of Charge Code should be between 1 and 100 characters."}).then((function(t){var o=t.value;e.btnLoading=!0,e.$emit("confirmToDestory",e.stopLoading,o)}))}}},_=E,F=(o("8a75"),Object(C["a"])(_,P,D,!1,null,"40dc6696",null)),B=F.exports,I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"Perm Out Confirmation",visible:e.open,width:"550px",top:"50%","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleCancel},on:{"update:visible":function(t){e.open=t}}},[o("div",[o("span",{staticStyle:{"font-size":"larger"}},[e._v("In total, "+e._s(this.multipleSelection.length)+" rows have been selected.")]),o("span",[o("div",{staticStyle:{"max-height":"300px","overflow-y":"scroll","margin-top":"20px"}},[o("ul",{staticClass:"horizontal-list"},e._l(e.multipleSelection,(function(t,i){return o("li",{key:Math.random(),style:"color: "+(e.isSelectedBoxState(t)?"red":"")},[e._v(" "+e._s(t.boxNumber)+e._s(i<e.multipleSelection.length-1?",":"")+" ")])})),0)])])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handlePermOut}},[e._v("Perm Out")])],1)])},N=[],$={name:"PermOutBox",components:{},props:{open:{required:!0,type:Boolean,default:!1},multipleSelection:{required:!0,type:Array,default:[]}},data:function(){return{btnLoading:!1}},computed:{btnDisabled:{get:function(){var e=this.multipleSelection.filter(this.isSelectedBoxState);return(null===e||void 0===e?void 0:e.length)>0}}},methods:{isSelectedBoxState:function(e){return"DESTROYED"===e.boxState||"PERM OUT"===e.boxState},stopLoading:function(){this.btnLoading=!1},handleCancel:function(){this.$emit("closePermOut")},handlePermOut:function(){var e=this;this.$prompt("Please input a charge code","Input",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputPattern:/^.{1,100}$/,inputErrorMessage:"The input length of Charge Code should be between 1 and 100 characters."}).then((function(t){var o=t.value;e.btnLoading=!0,e.$emit("confirmToPermOut",e.stopLoading,o)}))}}},O=$,U=(o("b351"),Object(C["a"])(O,I,N,!1,null,"e4fabefe",null)),q=U.exports,T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"Edit Charge",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("div",[o("span",{staticStyle:{"font-size":"larger"}},[e._v("In total, "+e._s(this.multipleSelection.length)+" rows have been selected.")]),o("span",[o("div",{staticStyle:{"max-height":"300px","overflow-y":"scroll",margin:"20px 0px"}},[o("ul",{staticClass:"horizontal-list"},e._l(e.multipleSelection,(function(t,i){return o("li",{key:Math.random()},[e._v(" "+e._s(t.boxNumber)+e._s(i<e.multipleSelection.length-1?",":"")+" ")])})),0)])])]),o("el-form",{ref:"validateForm",staticStyle:{width:"600px"},attrs:{model:e.form,inline:!1,rules:e.rules}},[o("el-form-item",{attrs:{label:"Charge Code",prop:"chargeCode","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"230px"},attrs:{clearable:""},model:{value:e.form.chargeCode,callback:function(t){e.$set(e.form,"chargeCode","string"===typeof t?t.trim():t)},expression:"form.chargeCode"}})],1)],1),o("span",[e._v(e._s(e.msg))]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.handleSave}},[e._v("Update")])],1)],1)},A=[],R={name:"Boxprofilechargeeditor",components:{},props:{multipleSelection:{required:!0,type:Array,default:[]}},data:function(){return{btnLoading:!1,msg:"",dialogFormVisible:!1,form:{chargeCode:null},formLabelWidth:"120px",rules:{chargeCode:[{required:!0,message:"Charge code cannot be empty",trigger:"change"}]}}},methods:{handleEditingCharge:function(){var e=this;this.btnLoading=!0,this.msg="Saving charge code...";var t=this.multipleSelection.map((function(t,o){return{id:t.id,deptId:t.deptId,chargeCode:e.form.chargeCode}}));Object(s["c"])(t).then((function(t){e.dialogFormVisible=!1,e.$emit("fillBackChargeCode",e.form.chargeCode),e.$message({showClose:!0,message:"Successfully Changed",type:"success"}),e.msg="",e.btnLoading=!1})).catch((function(t){e.dialogFormVisible=!1,e.$message({showClose:!0,message:"Change Failed",type:"error"}),e.msg="",e.btnLoading=!1}))},handleSave:function(){var e=this;this.$refs["validateForm"].validate((function(t){if(!t)return!1;e.btnLoading=!0,e.msg="Checking charge code...",Object(c["f"])({eid:e.form.chargeCode}).then((function(t){e.btnLoading=!1,"CHARGEABLE"==t.data.chargeable?e.handleEditingCharge():(e.msg="",e.$message({showClose:!0,message:"This charge code is not chargeable. Please provide another input.",type:"error"}))})).catch((function(t){e.btnLoading=!1,e.msg=""}))}))},open:function(){var e;this.dialogFormVisible=!0,null===(e=this.$refs["validateForm"])||void 0===e||e.resetFields(),this.form.chargeCode=null}}},M=R,j=(o("1797"),Object(C["a"])(M,T,A,!1,null,"24d130b2",null)),z=j.exports,V=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"Upload Approval Files",visible:e.open,width:"650px",top:"50%","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleCancel},on:{"update:visible":function(t){e.open=t}}},[o("div",[o("span",{staticStyle:{"font-size":"larger"}},[e._v("In total, "+e._s(this.multipleSelection.length)+" rows have been selected.")]),o("span",[o("div",{staticStyle:{"max-height":"300px","overflow-y":"scroll","margin-top":"20px"}},[o("ul",{staticClass:"horizontal-list"},e._l(e.multipleSelection,(function(t,i){return o("li",{key:t.oldSystemfileID},[e._v(" "+e._s(t.boxNumber)+e._s(i<e.multipleSelection.length-1?",":"")+" ")])})),0)])]),o("div",{staticStyle:{"margin-top":"10px",height:"200px","overflow-y":"auto"}},[o("el-upload",{ref:"upload",staticClass:"custom-upload",attrs:{action:e.uploadFileUrl,"before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"on-success":e.handleUploadSuccess,"on-error":e.handleError,"on-change":e.handleChange,"file-list":e.fileList,accept:".png,.jpeg,.jpg,.pdf,.msg",headers:e.headers,"auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("Choose Files")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/jpeg/png/pdf/msg文件，且不超过10MB")])],1)],1)]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.resetUploadForm}},[e._v("Reset")]),o("el-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:0==this.fileList.length},on:{click:e.submitUpload}},[e._v("Upload")])],1)])},Y=[],G=(o("99af"),o("b0c0"),o("5f87")),H={name:"UploadApprovalFiles",components:{},props:{open:{required:!0,type:Boolean,default:!1},multipleSelection:{required:!0,type:Array,default:[]}},data:function(){return{btnLoading:!1,uploadFileUrl:"/filing/prod-api/file/upload/filing",headers:{Authorization:"Bearer "+Object(G["a"])()},fileList:[],fileUrls:[]}},computed:{},watch:{fileUrls:{handler:function(e){e.length>0&&e.length===this.fileList.length&&(this.$modal.msgSuccess("Upload successfully"),this.insertFilesToDB())}}},mounted:function(){},methods:{resetUploadForm:function(){this.fileList=[],this.fileUrls=[],this.btnLoading=!1},handleCancel:function(){this.$emit("closeUploadApprovalFiles")},submitUpload:function(){this.fileList.length>0&&(this.btnLoading=!0,this.$refs.upload.submit())},handleChange:function(e,t){this.fileList=t},handleRemove:function(e,t){this.fileList=t},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleUploadSuccess:function(e,t,o){e.data?this.fileUrls.push({name:e.data.name,url:e.data.url}):this.$message.error("文件服务未找到!")},handleError:function(e,t,o){this.$modal.msgError("File upload failed. Please check your network connection or file size."),this.handleCancel()},beforeUpload:function(e){var t=e.name,o=t.substring(t.lastIndexOf(".")).toLowerCase(),i=[".jpg",".jpeg",".png",".pdf",".msg"],a=i.includes(o),n=e.size/1024/1024<10;return a?n||(this.$message.error("The uploaded file size cannot exceed 10MB!"),this.btnLoading=!1):(this.$message.error("You can only upload files in JPG/PNG/PDF/MSG format!"),this.btnLoading=!1),a&&n},findUrlByName:function(e){var t=this.fileUrls.find((function(t){return t.name===e}));return t?t.url:null},insertFilesToDB:function(){var e=this,t=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId}})),o=this.fileList.map((function(t,o){return{fileName:t.name,fileType:t.name.substring(t.name.lastIndexOf(".")).toLowerCase(),fileSize:t.size,filePath:e.findUrlByName(t.name),usage:1}})),i={keys:t,attachments:o};Object(s["g"])(i).then((function(t){e.$emit("finished",t.data)})).catch((function(t){e.handleCancel()}))}}},Q=H,J=(o("3145"),Object(C["a"])(Q,V,Y,!1,null,"47775a5a",null)),K=J.exports,W=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"Upload File Details",visible:e.open,width:"650px",top:"50%","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleCancel},on:{"update:visible":function(t){e.open=t}}},[o("div",[o("span",{staticStyle:{"font-size":"larger"}},[e._v("In total, "+e._s(this.multipleSelection.length)+" rows have been selected.")]),o("span",[o("div",{staticStyle:{"max-height":"300px","overflow-y":"scroll","margin-top":"20px"}},[o("ul",{staticClass:"horizontal-list"},e._l(e.multipleSelection,(function(t,i){return o("li",{key:t.oldSystemfileID},[e._v(" "+e._s(t.boxNumber)+e._s(i<e.multipleSelection.length-1?",":"")+" ")])})),0)])]),o("div",{staticStyle:{"margin-top":"10px",height:"200px","overflow-y":"auto"}},[o("el-upload",{ref:"upload",staticClass:"custom-upload",attrs:{action:e.uploadFileUrl,"before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"on-success":e.handleUploadSuccess,"on-error":e.handleError,"on-change":e.handleChange,"file-list":e.fileList,accept:".xlsx",headers:e.headers,"auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("Choose Files")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx文件，且不超过10MB")])],1)],1)]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.resetUploadForm}},[e._v("Reset")]),o("el-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:0==this.fileList.length},on:{click:e.submitUpload}},[e._v("Upload")])],1)])},X=[],Z={name:"UploadFileDetails",components:{},props:{open:{required:!0,type:Boolean,default:!1},multipleSelection:{required:!0,type:Array,default:[]}},data:function(){return{btnLoading:!1,uploadFileUrl:"/filing/prod-api/file/upload/filing",headers:{Authorization:"Bearer "+Object(G["a"])()},fileList:[],fileUrls:[]}},computed:{},watch:{fileUrls:{handler:function(e){e.length>0&&e.length===this.fileList.length&&(this.$modal.msgSuccess("Upload successfully"),this.insertFilesToDB())}}},mounted:function(){},methods:{resetUploadForm:function(){this.fileList=[],this.fileUrls=[],this.btnLoading=!1},handleCancel:function(){this.$emit("closeUploadFileDetails")},submitUpload:function(){this.fileList.length>0&&(this.btnLoading=!0,this.$refs.upload.submit())},handleChange:function(e,t){this.fileList=t},handleRemove:function(e,t){this.fileList=t},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleUploadSuccess:function(e,t,o){e.data?this.fileUrls.push({name:e.data.name,url:e.data.url}):this.$message.error("文件服务未找到!")},handleError:function(e,t,o){this.$modal.msgError("File upload failed. Please check your network connection or file size."),this.handleCancel()},beforeUpload:function(e){var t=e.name,o=t.substring(t.lastIndexOf(".")).toLowerCase(),i=[".xlsx"],a=i.includes(o),n=e.size/1024/1024<10;return a?n||(this.$message.error("The uploaded file size cannot exceed 10MB!"),this.btnLoading=!1):(this.$message.error("You can only upload files in Xlsx format!"),this.btnLoading=!1),a&&n},findUrlByName:function(e){var t=this.fileUrls.find((function(t){return t.name===e}));return t?t.url:null},insertFilesToDB:function(){var e=this,t=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId}})),o=this.fileList.map((function(t,o){return{fileName:t.name,fileType:t.name.substring(t.name.lastIndexOf(".")).toLowerCase(),fileSize:t.size,filePath:e.findUrlByName(t.name),usage:2}})),i={keys:t,attachments:o};Object(s["g"])(i).then((function(t){e.$emit("finished",t.data)})).catch((function(t){e.handleCancel()}))}}},ee=Z,te=(o("f7fc"),Object(C["a"])(ee,W,X,!1,null,"1a4c08c4",null)),oe=te.exports,ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{on:{mouseover:e.onMouseOver,mouseleave:e.onMouseOut}},[o("a",{attrs:{target:"_self",href:e.fileDownloadURL}},[e._v(e._s(e.file.fileName))]),e.showCloseIcon?o("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer","margin-left":"4px"},on:{click:e.handleRemoveFile}}):e._e()])},ae=[],ne={name:"FileLink",components:{},props:{file:{required:!0,type:Object},row:{required:!0,type:Object}},data:function(){return{showCloseIcon:!1}},computed:{fileDownloadURL:{get:function(){return"https://cri-riqnfw19m2zc7zaf-registry.oss-cn-shanghai.aliyuncs.com/filingsystem/box/"+this.file.filePath},set:function(e){}}},mounted:function(){},methods:{onMouseOver:function(){this.showCloseIcon=!0},onMouseOut:function(){this.showCloseIcon=!1},handleRemoveFile:function(){var e=this;this.$confirm("This action will delete the file. Do you want to continue?","Info",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){e.$emit("removeFileLink",e.file.id,e.row)})).catch((function(){}))}}},le=ne,re=(o("13b7"),Object(C["a"])(le,ie,ae,!1,null,"198c8a5a",null)),se=re.exports,ce={name:"Boxprofile",components:{BoxProfileSearch:p["a"],BoxProfileEditor:k,BoxProfileExportConfirm:L["a"],DestoryBox:B,PermOutBox:q,BoxProfileChargeEditor:z,UploadApprovalFiles:K,UploadFileDetails:oe,FileLink:se},data:function(){return{autocompleteEIC:"new-password",autocompletePIC:"new-password",showSearch:!0,columns:[{key:0,label:"Box No",visible:!0},{key:1,label:"ID",visible:!1},{key:2,label:"Dept ID",visible:!1},{key:3,label:"Raw Data",visible:!0},{key:4,label:"Box Department",visible:!0},{key:5,label:"Vendor Number",visible:!0},{key:6,label:"Vendor Barcode",visible:!0},{key:7,label:"Retention Date",visible:!0},{key:8,label:"Charge Code",visible:!0},{key:9,label:"Approver LPN",visible:!0},{key:10,label:"Approver Email",visible:!0},{key:11,label:"Requester LPN",visible:!0},{key:12,label:"Requester Email",visible:!0},{key:13,label:"Box Status",visible:!0},{key:14,label:"Location",visible:!0},{key:15,label:"Borrow State",visible:!0},{key:16,label:"Borrower LPN",visible:!0},{key:17,label:"Borrower Name",visible:!0},{key:18,label:"Destruction Time",visible:!0},{key:19,label:"Destruction Officer",visible:!0},{key:20,label:"Create Time?",visible:!0},{key:21,label:"Create By",visible:!0},{key:22,label:"Update Time",visible:!0},{key:23,label:"Update By",visible:!0},{key:24,label:"Account Code",visible:!0},{key:25,label:"Box Remark",visible:!0},{key:26,label:"Approval Files",visible:!0},{key:27,label:"File Details",visible:!0}],mode:"Insert",editRowIndex:null,clipboard:null,loading:!1,btnLoading:!1,ids:[],single:!0,multiple:!0,total:0,profileList:[],queryParams:{pageNum:1,pageSize:Number(this.$cache.local.get("displayPageRows"))||10},open:!1,dpn:["Y","N"],form:{engagementNumber:null,deptId:null,areaLocation:"",fileDescription:"",clientNumber:"",clientCompanyName:"",fileType:"",fileState:null,yearEndDate:null,auditReportDate:null,engagementEIC:"",engagementEICEmail:"",engagementPartner:"",engagementPartnerEmail:"",moveTo:"",fileremarks:"",clientGroupName:"",boxNumber:"",ccId:"",retentionPeriod:10,isDPN:"",staffId:"",requesterName:"",newFileState:"",approvalFiles:"",fileDetails:""},areaLocations:[],fileTypes:["A","T","I","O"],fileStates:["LOSE"],newFileID:"",showTable:!1,searchCriteria:null,exportCriteria:{},multipleSelection:[],activeRowIndex:null,confirmSelectedDialogVisible:!1,showExportConfirm:!1,exportAll:!1,showDestoryBox:!1,showPermOut:!1,showUploadApprovalFiles:!1,showUploadFileDetails:!1}},activated:function(){this.$refs.boxSearch.isFormEmpty()||this.$refs.boxSearch.handleQueryByPageNum(this.queryParams.pageNum,this.queryParams.pageSize)},computed:{themeColor:{get:function(){return"#FFE600"==this.$store.state.settings.theme?"black":"white"}},themeLight:{get:function(){return Object(u["c"])(this.$store.state.settings.theme,.9)}},title:{get:function(){return"Insert"==this.mode?"New File":"Update File"},set:function(e){}},showAllButtons:{get:function(){return 1==this.showTable&&this.profileList.length>0},set:function(e){}}},mounted:function(){var e=this;this.clipboard=new r.a("#copyNode",{text:function(t){return e.$notify.currentNotice&&e.$notify.currentNotice.close(),e.$notify({title:"Copied!",message:"",type:"success"}),e.newFileID}}),this.clipboard.on("error",(function(t){e.$message.error("FileID复制失败")}))},destroyed:function(){var e;null===(e=this.clipboard)||void 0===e||e.destroy()},methods:{receiveSearchResult:function(e,t){this.showTable=!0,this.profileList=e.rows,this.searchCriteria=t,this.total=e.total},resetPageInfo:function(){var e;this.queryParams.pageNum=1,this.queryParams.pageSize=Number(this.$cache.local.get("displayPageRows"))||10,null===(e=this.$refs.multipleTable)||void 0===e||e.clearSelection()},handleAdd:function(){var e=this;this.mode="Insert",this.open=!0,this.$nextTick((function(){e.$refs.editor.restoreForm()}))},closeEditor:function(e){this.newFileID=e,this.open=!1},handleSelectionChange:function(e){this.multipleSelection=e},searchByPaging:function(){null!=this.searchCriteria&&(this.loading=!0,this.$refs.boxSearch.handleQueryByPageNum(this.queryParams.pageNum,this.queryParams.pageSize))},addThenQuery:function(e,t){this.$refs.boxSearch.addThenQuery(e,t)},refreshTableRow:function(e){this.$set(this.profileList,this.editRowIndex,e)},handleEdit:function(e,t){var o=this;this.$confirm("Are you sure to edit this Box?","Info",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then((function(){o.mode="Update",o.editRowIndex=t,o.open=!0;var i={id:e.id,deptId:e.deptId};o.$refs.editor.handleGetProfile(i)})).catch((function(){}))},willHistory:function(e){var t=this,o={path:"/filingsystem/boxmanagement/boxedithistory",name:"Box Edit History"};this.$tab.closePage(o).then((function(){t.$tab.openPage("Box Edit History","/filingsystem/boxmanagement/boxedithistory",{boxNumber:e})}))},columnStyle:function(e,t,o,i){return"color: black;padding:0px 0px;"},headerColStyle:function(e,t,o,i){return"padding:0px 0px;height:10px"},handleRowClick:function(e,t,o){this.activeRowIndex=e.id+"-"+e.deptId},rowStyle:function(e){var t=e.row;e.rowIndex;return this.activeRowIndex===t.id+"-"+t.deptId?{backgroundColor:this.themeLight}:{}},exportSearchData:function(e){if("Export Selected"===e){if(0==this.multipleSelection.length)return void this.$modal.alert("Please select check box!");if(this.multipleSelection.length>1e4)return void this.$modal.alert("The selected ID count cannot exceed 10,000");this.exportAll=!1}else this.exportAll=!0;this.showExportConfirm=!0},whenChangeDeptId:function(e){this.exportCriteria.deptId=e},closeExportConfirm:function(){this.showExportConfirm=!1},confirmToExport:function(e){e?(this.exportCriteria=this.searchCriteria,this.exportCriteria.lstId=new Array,this.exportCriteria.lstDeptId=new Array,this.download("filingsystem/filing/boxprofile/exportBoxProfileList",Object(n["a"])({},this.exportCriteria),"".concat(Object(d["d"])(new Date)," Box Profile.xlsx"))):(this.exportCriteria.lstId=this.multipleSelection.map((function(e){return e.id})),this.exportCriteria.lstDeptId=this.multipleSelection.map((function(e){return e.deptId})),this.download("filingsystem/filing/boxprofile/exportBoxProfileList",Object(n["a"])({},this.exportCriteria),"".concat(Object(d["d"])(new Date)," Box Profile.xlsx"))),this.showExportConfirm=!1},closeDestoryBox:function(){this.showDestoryBox=!1},handleDestoryBoxData:function(e,t){var o=this,i=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId,chargeCode:t}}));Object(s["b"])(i).then((function(a){o.profileList.forEach((function(e,a){var n=i.find((function(t){return t.id===e.id&&t.deptId===e.deptId}));n&&(e.boxState="DESTROYED",e.chargeCode=t,o.$set(o.profileList,a,e))})),e(),o.showDestoryBox=!1,o.$message({showClose:!0,message:"Successfully Changed",type:"success"})})).catch((function(t){e(),o.showDestoryBox=!1,o.$message({showClose:!0,message:"Change Failed",type:"error"})}))},confirmToDestory:function(e,t){var o=this;Object(c["f"])({eid:t}).then((function(i){"CHARGEABLE"==i.data.chargeable?o.handleDestoryBoxData(e,t):(e(),o.$message({showClose:!0,message:"This charge code is not chargeable. Please provide another input.",type:"error"}))})).catch((function(t){e()}))},closePermOut:function(){this.showPermOut=!1},handlePermOutData:function(e,t){var o=this,i=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId,chargeCode:t}}));Object(s["e"])(i).then((function(a){o.profileList.forEach((function(e,a){var n=i.find((function(t){return t.id===e.id&&t.deptId===e.deptId}));n&&(e.boxState="PERM OUT",e.chargeCode=t,o.$set(o.profileList,a,e))})),e(),o.showPermOut=!1,o.$message({showClose:!0,message:"Successfully Changed",type:"success"})})).catch((function(t){e()}))},confirmToPermOut:function(e,t){var o=this;Object(c["f"])({eid:t}).then((function(i){"CHARGEABLE"==i.data.chargeable?o.handlePermOutData(e,t):(e(),o.$message({showClose:!0,message:"This charge code is not chargeable. Please provide another input.",type:"error"}))})).catch((function(t){e()}))},closeUploadApprovalFiles:function(){this.showUploadApprovalFiles=!1},finishedUploadApprovalFiles:function(e){var t=this,o=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId}}));this.profileList.forEach((function(i,a){var n=o.find((function(e){return e.id===i.id&&e.deptId===i.deptId}));n&&(i.approvalFiles=t.generateFileLinks(n.deptId,n.id,e,1),t.$set(t.profileList,a,i))})),this.showUploadApprovalFiles=!1},generateFileLinks:function(e,t,o,i){var a=[];return o.forEach((function(o,n){o.deptId===e&&o.boxProfileId===t&&o.usage===i&&a.push(o)})),a},removeApprovalFileLink:function(e,t){var o=this;this.profileList.forEach((function(i,a){if(t.id===i.id&&t.deptId===i.deptId){var n={fileId:e,boxId:t.id,deptId:t.deptId};Object(s["f"])(n).then((function(n){i.approvalFiles=t.approvalFiles.filter((function(t){return t.id!==e})),o.$set(o.profileList,a,i)})).catch((function(e){}))}}))},closeUploadFileDetails:function(){this.showUploadFileDetails=!1},finishedUploadFileDetails:function(e){var t=this,o=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId}}));this.profileList.forEach((function(i,a){var n=o.find((function(e){return e.id===i.id&&e.deptId===i.deptId}));n&&(i.fileDetails=t.generateFileLinks(n.deptId,n.id,e,2),t.$set(t.profileList,a,i))})),this.showUploadFileDetails=!1},removeDetailsFileLink:function(e,t){var o=this;this.profileList.forEach((function(i,a){if(t.id===i.id&&t.deptId===i.deptId){var n={fileId:e,boxId:t.id,deptId:t.deptId};Object(s["f"])(n).then((function(n){i.fileDetails=t.fileDetails.filter((function(t){return t.id!==e})),o.$set(o.profileList,a,i)})).catch((function(e){}))}}))},handleDestoryBox:function(){0==this.multipleSelection.length?this.$modal.alert("Please select check box!"):this.showDestoryBox=!0},handlePermOut:function(){0==this.multipleSelection.length?this.$modal.alert("Please select check box!"):this.showPermOut=!0},handleEditCharge:function(){0==this.multipleSelection.length?this.$modal.alert("Please select check box!"):this.$refs.chargeEditor.open()},fillBackChargeCode:function(e){var t=this,o=this.multipleSelection.map((function(e){return{id:e.id,deptId:e.deptId}}));this.profileList.forEach((function(i,a){var n=o.find((function(e){return e.id===i.id&&e.deptId===i.deptId}));n&&(i.chargeCode=e,t.$set(t.profileList,a,i))}))},handleUploadApprovalFiles:function(){0==this.multipleSelection.length?this.$modal.alert("Please select check box!"):(this.showUploadApprovalFiles=!0,this.$refs.uaf.resetUploadForm())},handleUploadFileDetails:function(){0==this.multipleSelection.length?this.$modal.alert("Please select check box!"):(this.showUploadFileDetails=!0,this.$refs.ufd.resetUploadForm())}}},de=ce,ue=(o("6011"),Object(C["a"])(de,i,a,!1,null,"02028190",null));t["default"]=ue.exports},"0a8c":function(e,t,o){},"13b7":function(e,t,o){"use strict";o("e738")},1588:function(e,t,o){},1797:function(e,t,o){"use strict";o("88ae")},3145:function(e,t,o){"use strict";o("513a")},"4f6b":function(e,t,o){},"513a":function(e,t,o){},6011:function(e,t,o){"use strict";o("788a")},"6a56":function(e,t,o){},"788a":function(e,t,o){},"7bb1":function(e,t,o){"use strict";o("0a8c")},"88ae":function(e,t,o){},"8a75":function(e,t,o){"use strict";o("4f6b")},b351:function(e,t,o){"use strict";o("1588")},d7a3:function(e,t,o){"use strict";o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return n})),o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return r}));var i=o("b775");function a(e){return Object(i["a"])({url:"/filingsystem/filing/borrowrecord/fetchStaffByID",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/filingsystem/filing/borrowrecord/getBorrowRecordsByStaffID",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/filingsystem/filing/borrowrecord/fetchBorrowFile",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/filingsystem/filing/borrowrecord/borrowConfirm",method:"post",data:e})}},e738:function(e,t,o){},f7fc:function(e,t,o){"use strict";o("6a56")}}]);